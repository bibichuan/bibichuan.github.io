<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nginx安装配置</title>
    <!-- 页面描述 -->
<meta name="description" content=""/>
<!-- 页面关键词 -->
<meta name="keywords" content=""/>
<!-- 网页作者 -->
<meta name="author" content="bibichuan, ibibichuan@gmail.com"/>
<!-- 搜索引擎抓取 -->
<meta name="robots" content="index,follow"/>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>

<!--禁止百度转码-->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<!--启用WebApp全屏模式-->
<meta name="apple-mobile-web-app-capable" content="yes" />
<!--禁止数字自动识别为电话号码-->
<meta name="format-detection" content="telephone=no" />
<!--忽略识别邮箱-->
<meta name="format-detection" content="email=no" />
<!--360强制谷歌内核-->
<meta name="renderer" content="webkit"> 

<link rel="icon" href="/images/favicon.ico">

<link rel="stylesheet" href="//at.alicdn.com/t/font_1022896_nclaqhxyt.css">

<link href="/css/main.css" rel="stylesheet" type="text/css" />

<!-- 谷歌广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8382618401389723"></script>


<script type="text/javascript" id="hexo.configurations">
  var BTheme = window.BTheme ||{};
  var CONFIG = {
    root: '/'
  };
</script>

<!--百度统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ee4ff785c4c68fa9a0ea17241e0574ea";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!--谷歌统计-->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G4HPTST8XX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G4HPTST8XX');
</script>

    
    
        
    
        
            
            
            <link href="/lib/layui/css/layui.css" rel="stylesheet" type="text/css" />
        
    

    
        
    

    
        
    


    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" />
<link rel="stylesheet" type="text/css" href="/lib/share/style/css/ishare.css">

<meta name="generator" content="Hexo 5.4.2"></head>
<body class="main">

    <header id="header" class="header layui-fluid">
        <div class="header-inner layui-row"><div class="header-wrap">
    <div class="logo_wrap">
        <a href="/"><img src="/images/logo.png"></a>
    </div>
    <div class='search-warp'>
  <div class="search">
    <input class="search-ipt" placeholder="请输入搜索内容"/>
    <div class="search-btn clear"><i class="iconfont icon-guanbi"></i></div>
    <div class="search-btn find"><i class="iconfont icon-sousuo"></i></div>
  </div>
  <div class="result">
    <ul class="result-content"></ul>
  </div>
</div>
    <div class="icon-menu"><i class="iconfont icon-m_menu"></i></div>
    <nav class="site-nav">
        <ul class="menu layui-nav">
            
            
            <li class="menu-item layui-nav-item">
                <a href="/" rel="section">
                    <i class="iconfont icon-home"></i>首页<i class="iconfont icon-header-mobile icon-right"></i>
                </a>
            </li>
            
            

            
            

            
            
                
                
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E6%9D%82%E6%96%87/">
                                    杂文
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Python/">
                                    Python
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Gis/">
                                    Gis
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Asp/">
                                    Asp
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E8%BD%AF%E4%BB%B6/">
                                    软件
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <li class="more menu-item layui-nav-item">
                    
                    <a href="javascript:;" class="menu-more">
                        更多分类
                        <i class="iconfont icon-header-mobile icon-sidemenu"></i>
                    </a>
                    
                    <dl class="layui-nav-child">
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Java/">
                                            Java
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%89%8D%E7%AB%AF/">
                                            前端
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Javascript/">
                                            Javascript
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                            数据库
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
                                            操作系统
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Nodejs/">
                                            Nodejs
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">
                                            大数据
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1/">
                                            后台服务
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E9%9A%8F%E7%AC%94/">
                                            随笔
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">
                                            机器学习
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%85%B6%E4%BB%96/">
                                            其他
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                    </dl>
                </li>
            
        </ul>
    </nav>
</div></div>
    </header>
    
    <main class="main-content layui-fluid" id="main-content">
      <div class="main-inner">
        
  <div class="layui-row layui-col-space15">
    <div class="layui-col-xs12 layui-col-sm10 layui-col-sm-offset1 layui-col-md6 layui-col-md-offset2 layui-col-lg6 layui-col-lg-offset2">
        <div class="container post_wrap">
          <div class="post">
            <div class="article">
              <h1 class="title">Nginx安装配置</h1>
              <div class="author">
                <span class="tag">标签：
                  

                  
                    
                    
                      
                      
                      <a href="/tags/Nginx/">Nginx</a>
                    
                  
                </span>
                <span class="tag">分类：
                  

                  
                    
                    
                      
                      
                      <a href="/categories/%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1/">后台服务</a>
                    
                  
                </span>
                <span class='tag'>
                  创建时间：2020-02-05 03:12:35
                </span>
                <span class='tag'>
                  更新时间：2025-04-28 14:37:40
                </span>
              </div>
              <div class="content">
                <html><head></head><body><h2 id="1-Deepin安装卸载Nginx"><a href="#1-Deepin安装卸载Nginx" class="headerlink" title="1.Deepin安装卸载Nginx"></a>1.Deepin安装卸载Nginx</h2><p>(1) 参考文章1中，使用apt安装。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装</span></span><br><span class="line"><span class="built_in">sudo</span> apt install nginx</span><br><span class="line"><span class="comment">## 文档一般在 /usr/share</span></span><br><span class="line"><span class="comment">## 可执行文件 /usr/bin</span></span><br><span class="line"><span class="comment">## 配置文件 /etc</span></span><br><span class="line"><span class="comment">##lib文件 /usr/lib</span></span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://www.howtoing.com/how-to-install-nginx-on-ubuntu-18-04">如何在Ubuntu 18.04上安装Nginx</a><br>2.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/EasonJim/p/7806879.html">Ubuntu 16.04安装Nginx</a><br>3.<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ca5ee5f7075c">CentOS7设置nginx开机自启动</a> (这里有如何使用systemctl控制管理nginx的开机启动)</div>
<p>(2) 卸载nginx</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##　停止nginx</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl stop nginx</span><br><span class="line"><span class="comment">## 查询</span></span><br><span class="line">dpkg --get-selections|　grep nginx</span><br><span class="line"><span class="comment">## 卸载主程序</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get --purge remove nginx-full</span><br></pre></td></tr></tbody></table></figure>

<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_6.png" lay-src="/posts/f317c24/nginx_6.png" class="" title="nginx安装">

<p>再次使用dpkg，查看nginx相关文件，然后使用autoremove卸载其他相关文件。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get autoremove</span><br></pre></td></tr></tbody></table></figure>

<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_7.png" lay-src="/posts/f317c24/nginx_7.png" class="" title="nginx安装">

<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/adley_app/article/details/79223221">Ubuntu下完全卸载nginx服务器</a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_37825238/article/details/78814795">ubuntu 完全卸载nginx</a><br>3.<a target="_blank" rel="noopener" href="https://xuexb.github.io/learn-nginx/guide/nginx-configure-descriptions.html#%E5%91%BD%E4%BB%A4">Nginx 编译参数</a></div>
<h2 id="2-CentOS编译安装"><a href="#2-CentOS编译安装" class="headerlink" title="2.CentOS编译安装"></a>2.CentOS编译安装</h2><p><a target="_blank" rel="noopener" href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/">下载源码</a></p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装依赖</span></span><br><span class="line">yum -y install gcc automake autoconf libtool make pcre pcre-devel zlib zlib-devel openssl openssl-devel </span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果离线安装的话，可能需要下载相应的开发包,可以通过whereis 查看是否安装相关依赖</span></span><br><span class="line">whereis zlib </span><br><span class="line"></span><br><span class="line"><span class="comment">## 进入源码目录</span></span><br><span class="line"><span class="built_in">cd</span> nginx</span><br><span class="line"><span class="comment">## 配置</span></span><br><span class="line">./configure \</span><br><span class="line">    --prefix=/usr/local/nginx \</span><br><span class="line">    --sbin-path=/usr/local/nginx/sbin/nginx \</span><br><span class="line">    --conf-path=/usr/local/nginx/conf/nginx.conf \</span><br><span class="line">    --error-log-path=/usr/local/nginx/logs/error.log \</span><br><span class="line">    --pid-path=/usr/local/nginx/logs/nginx.pid \</span><br><span class="line">    --lock-path=/usr/local/nginx/lock/nginx.lock \</span><br><span class="line">    --with-http_ssl_module \</span><br><span class="line">    --with-http_stub_status_module \</span><br><span class="line">    --with-http_realip_module \</span><br><span class="line">    --with-threads \</span><br><span class="line">    --with-http_gzip_static_module </span><br><span class="line"></span><br><span class="line"><span class="comment">## 编译</span></span><br><span class="line">make</span><br><span class="line"><span class="comment">## 安装</span></span><br><span class="line">make install </span><br><span class="line"></span><br><span class="line"><span class="comment">## 卸载时，查看安装日志，文件都被放到了/usr/local/nginx中了，删除 /usr/local/nginx 文件夹就好了</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 进入安装目录</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/nginx</span><br><span class="line"><span class="comment">## 查看启动参数</span></span><br><span class="line">sbin/nginx -h</span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line">sbin/nginx</span><br><span class="line"><span class="comment">## 查看进程</span></span><br><span class="line">ps aux |grep nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## 停止</span></span><br><span class="line">sbin/nginx -s stop</span><br><span class="line"></span><br><span class="line"><span class="comment">## 重读配置文件</span></span><br><span class="line">sbin/nginx -s reload</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>出现这个情况，我还以为是安装失败了呢</p>
<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_8.png" lay-src="/posts/f317c24/nginx_8.png" class="" title="nginx编译">

<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Tommy-Yu/p/4994683.html">nginx 免安装包</a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013991521/article/details/76037722">nginx 免安装包</a><br>3.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/stulzq/p/9291223.html">CentOS 7 源码编译安装 Nginx</a><br>4.<a target="_blank" rel="noopener" href="https://blog.csdn.net/hsd2012/article/details/51376674">Linux下源码安装nginx-1.9.11</a><br>5.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42167759/article/details/84998956">Nginx —— configure的命令参数（nginx编译选项）</a> (这里有配置文件的默认值)<br>6.<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b03cce9e0a5c">nginx编译安装与模块配置</a><br>7.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34556414/article/details/104777892">Nginx源码安装和yum安装对比</a><br>8.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/shihaiming/p/6281628.html"> Linux下编译安装PCRE库</a><br>9.<a target="_blank" rel="noopener" href="https://blog.csdn.net/shiyong1949/article/details/78212971">linux上安装Openssl步骤详解</a> 这里是编译安装的过程<br>【10】.<a target="_blank" rel="noopener" href="https://xie.infoq.cn/article/bf9b7b36f916cc70ecb6b45db">Nginx 源码编译安装与运行</a> 这里的依赖包通过在线安装的方式进行了安装</div>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>(1) ./configure: error: SSL modules require the OpenSSL library.You can either do not enable the modules, or install the OpenSSL library into the system, or build the OpenSSL library statically from the source with nginx by using –with-openssl=<path> option.<br>在我执行离线安装的时候，出现了这个问题，因为我的Openssl 不是通过 yum执行安装的。</path></p>
<p>【解决方法】<br>解决方法就是通过yum安装 Openssl,但是因为是离线状态，没法使用yum怎么办呢？那就是下载 openssl 源码包，然后在 configure 的时候指定交易源码包的位置，比如我的openssl源码包：/home/soft/soft/nginx/openssl-1.1.1g，那么我就可以 修改配置文件：</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">    --prefix=/usr/local/nginx \</span><br><span class="line">    --sbin-path=/usr/local/nginx/sbin/nginx \</span><br><span class="line">    --conf-path=/usr/local/nginx/conf/nginx.conf \</span><br><span class="line">    --error-log-path=/usr/local/nginx/logs/error.log \</span><br><span class="line">    --pid-path=/usr/local/nginx/logs/nginx.pid \</span><br><span class="line">    --lock-path=/usr/local/nginx/lock/nginx.lock \</span><br><span class="line">    --with-http_ssl_module \</span><br><span class="line">    --with-openssl=/home/soft/soft/nginx/openssl-1.1.1g \</span><br><span class="line">    --with-http_stub_status_module \</span><br><span class="line">    --with-http_realip_module \</span><br><span class="line">    --with-threads \</span><br><span class="line">    --with-http_gzip_static_module </span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/en_joker/article/details/109463411">解决方案：./configure: error: SSL modules require the OpenSSL library.</a><br>2.<a target="_blank" rel="noopener" href="https://zhongxc.cc/9273.html">Nginx 编译报错：SSL modules require the OpenSSL library</a> 这里的相关文件给出了参考文章4，倒是非常的有用。<br>3.[undefined reference to `BIO_f_zlib’](<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42806458/article/details/110678710">https://blog.csdn.net/weixin_42806458/article/details/110678710</a>)<br>4.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Guhongying/p/11636369.html">openresty：已经安装了openssl，但是执行 ./configure时还是一直报：./configure: error: SSL modules require the OpenSSL library.</a> 这篇文章给了解决方法</div>
<h2 id="3-使用systemctl管理"><a href="#3-使用systemctl管理" class="headerlink" title="3.使用systemctl管理"></a>3.使用systemctl管理</h2><p>编译安装之后，是无法直接使用systemctl管理nginx服务的，只能使用 /usr/local/nginx/sbin/nginx 命令加上参数进行管理和启动。如果非要使用 systemctl 进行管理，进入/ usr/lib/systemd/system 目录，新建nginx.service文件(vi /usr/lib/systemd/system/nginx.service)，内容如下：(内容的具体含义可以查看参考文章)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=nginx - high performance web server</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line">ExecReload=/usr/local/nginx/sbin/nginx -s reload</span><br><span class="line">ExecStop=/usr/local/nginx/sbin/nginx -s stop</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></tbody></table></figure>

<p>执行启动停止命令：</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 停止</span></span><br><span class="line">systemctl stop nginx</span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line">systemctl start nginx</span><br><span class="line"><span class="comment">## 重启</span></span><br><span class="line">systemctl restart nginx</span><br><span class="line"><span class="comment">## 开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></tbody></table></figure>


<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/zsx0728/article/details/80999081">NGINX使用systemctl管理</a></div>
<h2 id="4-查找nginx安装位置"><a href="#4-查找nginx安装位置" class="headerlink" title="4.查找nginx安装位置"></a>4.查找nginx安装位置</h2><p>(1) 在linux上配置nginx,需要首先知道nginx的安装位置,<br>手动编译安装的一般是/usr/local/nginx路径下。使用apt安装的时,配置文件的路径可能就不一样</p>
<p>apt安装：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/nginx：主程序</span><br><span class="line">/etc/nginx：存放配置文件</span><br><span class="line">/usr/share/nginx：存放静态文件</span><br><span class="line">/var/log/nginx：存放日志</span><br><span class="line">/etc/nginx/sites-available: 虚拟主机</span><br></pre></td></tr></tbody></table></figure>

<p>yum安装：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Nginx配置路径：/etc/nginx/</span><br><span class="line">PID目录：/var/run/nginx.pid</span><br><span class="line">错误日志：/var/log/nginx/error.log</span><br><span class="line">访问日志：/var/log/nginx/access.log</span><br><span class="line">默认站点目录：/usr/share/nginx/html</span><br></pre></td></tr></tbody></table></figure>

<p>事实上，只需知道Nginx配置路径，其他路径均可在/etc/nginx/nginx.conf 以及/etc/nginx/conf.d/default.conf 中查询到。</p>
<p>(2) 如果找不到,就用：find /|grep nginx.conf 命令查找看看。</p>
<p>(3) 还可以查看nginx启动进程，然后通过启动的进程查看配置文件，第一条命令：netstat -tnlp|grep nginx，获取到进程号后，在使用第二条命令：ps -aux |grep 进程号，同样也可以查找到nginx所使用的配置文件，及其安装路径。</p>
<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_25987491/article/details/81562948">ubuntu安装nginx及其默认目录结构</a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/u010316188/article/details/82495161">记录使用yum安装nginx之后的目录问题</a><br>3.<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007116797">nginx服务器详细安装过程（使用yum 和 源码包两种安装方式，并说明其区别）</a> yum 安装是在线安装，好处是：安装方式简单，不易出错；源码包 安装是先将 nginx 的源码下载下来，在自己的系统里编译生成可执行文件，然后执行，好处是：因为是在自己的系统上编译的，更符合自己系统的性能，也就是说在自己的系统上执行 nginx 服务性能效率更好。</div>
<h2 id="5-403-Forbidden"><a href="#5-403-Forbidden" class="headerlink" title="5.403 Forbidden"></a>5.403 Forbidden</h2><p>打开nginx之后，访问网站，总是提示Forbidden权限错误。</p>
<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_1.png" lay-src="/posts/f317c24/nginx_1.png" class="" title="nginx配置">

<p>解决方法:<br>(1) 查看nginx启动用户</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep <span class="string">"nginx: worker process"</span> | awk <span class="string">'{print $1}'</span></span><br></pre></td></tr></tbody></table></figure>
<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_2.png" lay-src="/posts/f317c24/nginx_2.png" class="" title="nginx配置">

<p>使用sudo启动nginx服务的时候，用户应该是root，所以，需要修改/etc/nginx/nginx.conf(手动安装的时候就找相应的配置文件)，将第一行的<code>user www-data</code>改为<code>user root</code></p>
<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_3.png" lay-src="/posts/f317c24/nginx_3.png" class="" title="nginx配置">

<p>(2) 另一个需要注意的地方就是,如果nginx.conf配置文件中没有配置<code>index index.html</code>这种默认文档，就需要写html的全路径，比如:<a target="_blank" rel="noopener" href="http://localhost/test/test.html">http://localhost/test/test.html</a>。如果设置了默认文档,就可以输入：<a target="_blank" rel="noopener" href="http://localhost/test/">http://localhost/test/</a>　</p>
<div class="reference">参考文章：<br>【1】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/onlysunnyboy/article/details/75270533">解决Nginx出现403 forbidden (13: Permission denied)报错的四种方法</a><br>【2】.<a target="_blank" rel="noopener" href="https://vexxhost.com/resources/tutorials/fixing-403-forbidden-nginx-errors/">fixing 403 forbidden nginx errors</a><br>【3】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/onlysunnyboy/article/details/75270533">解决Nginx出现403 forbidden (13: Permission denied)报错的四种方法</a> 一、由于启动用户和nginx工作用户不一致所致；二、缺少index.html或者index.php文件；三、权限问题，如果nginx没有web目录的操作权限，也会出现403错误；四、SELinux设置为开启状态（enabled）的原因。</div>
<h2 id="6-Windows安装"><a href="#6-Windows安装" class="headerlink" title="6.Windows安装"></a>6.Windows安装</h2><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 进入下载安装目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 可以双击启动，也可以使用命令行启动</span></span><br><span class="line">start nginx</span><br><span class="line"><span class="comment">## 或者直接运行nginx，但是这样的方法就是会一直占用这个cmd命令</span></span><br><span class="line">nginx.exe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 停止</span></span><br><span class="line">nginx.exe -s stop</span><br><span class="line"></span><br><span class="line"><span class="comment">## 或者</span></span><br><span class="line">nginx.exe -s quit</span><br><span class="line"></span><br><span class="line"><span class="comment">## 重载</span></span><br><span class="line">nginx.exe -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment">## 杀死所有的nginx进程</span></span><br><span class="line">taskkill /f /im nginx.exe</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看是否启动</span></span><br><span class="line">tasklist /fi “imagename eq nginx.exe” </span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://my.oschina.net/ManderSY/blog/1621359">Windows下kill Nginx所有进程</a><br>2.<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/01f3626cf25d">Windows下Nginx的启动、停止、重启等命令</a> 这里写的很详细了,nginx.exe -s reload<br>3.<a target="_blank" rel="noopener" href="https://juejin.cn/post/7090782751573901342"> Windows下Nginx的安装及开机启动 </a></div>
<h2 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h2><p>(1) “proxy_pass” cannot have URI part in location given by regular expression, or inside named location, or inside “if” statement, or inside “limit_except” block in /etc/nginx/sites-enabled/default:91</p>
<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_4.png" lay-src="/posts/f317c24/nginx_4.png" class="" title="nginx配置">

<p>nginx中的配置</p>
<img src="/images/loadimg.png" data-original="/posts/f317c24/nginx_5.png" lay-src="/posts/f317c24/nginx_5.png" class="" title="nginx配置">

<p>根据参考文章3中的意思，就是如果location包含了正则表达式,则 “proxy_pass”不能包含URI part(shop_goods),也就是端口后面不能有斜杠之后的东西。</p>
<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass">proxy_pass</a><br>2.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/53353572/proxy-pass-cannot-have-uri-part-in-location-given-by-regular-expression">“proxy_pass” cannot have URI part in location given by regular expression</a><br>3.<a target="_blank" rel="noopener" href="https://blog.csdn.net/andyzhaojianhui/article/details/78874312">nginx “proxy_pass” cannot have URI part in location given by regular expression</a><br>4.<a target="_blank" rel="noopener" href="http://m.udpwork.com/item/12552.html">记我配置Nginx代理的遭遇</a></div>
<hr>
<p>(2) error: this statement may fall through [-Werror=implicit-fallthrough=]<br>在Docker容器中，进行编译安装的时候，进行make的时候，出现了错误：</p>
<img src="/images/loadimg.png" data-original="/posts/f317c24/err_1.png" lay-src="/posts/f317c24/err_1.png" class="" title="err错误">

<p>【解决方法】<br>在进行make的时候，加上参数</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make CFLAGS=<span class="string">'-Wno-implicit-fallthrough'</span></span><br></pre></td></tr></tbody></table></figure>

<p>【终极解决方案】<br>原来是我nginx版本过低，我下载了1.10.1版本，而gcc版本是8，所以找最新的nginx 1.20.1就可以了。</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/jaybill/article/details/80164370">linux下编译nginx1.0.15报错：Implicit fallthrough error</a> gcc版本问题，有这几种解决方法：更换gcc版本，具体是升级还是降级还需测试；在报错的switch-case块中加上break。此时要对代码逻辑理解清楚，否则加上break有可能会破坏原来的逻辑； 编译时忽略Implicit fallthrough error这个错误。<br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangpeterx/article/details/97156314">报错解决：error: this statement may fall through [-Werror=implicit-fallthrough=]</a> make CFLAGS=’-Wno-implicit-fallthrough’<br>3.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55693007/error-this-statement-may-fall-through-werror-implicit-fallthrough">Error: this statement may fall through [-Werror=implicit-fallthrough=]</a> You should add keyword break to each case statement, if you don’t do that, the code will run from case which it matches condition and continue to meet the.您应该在每个 case 语句中添加关键字 break，如果不这样做，代码将从与条件匹配的 case 运行并继续满足</div></body></html>
              </div>
            </div>
          </div>
          <div class='post-footer'>
            <div>**本文已结束，感谢您的观看**</div>
            <div class="btn btn-pay">鼓励一下</div>
          </div>
          
            <div class="page">
              
              <section class="past-wrap">
                <section class="past">
                <p>往期推荐</p>
                </section>
              </section>
              <div class="post-nav">
                <div class="post-nav-next post-nav-item">
                  
                    <a href="/posts/db0ceba4.html" rel="next" title="Nginx知识总结">
                      <i class="iconfont icon-prev"></i> Nginx知识总结
                    </a>
                  
                </div>

                <span class="post-nav-divider"></span>

                <div class="post-nav-prev post-nav-item">
                  
                    <a href="/posts/7328c7cc.html" rel="prev" title="Nacos安装和配置">
                      Nacos安装和配置 <i class="iconfont icon-next"></i>
                    </a>
                  
                </div>
              </div>
            </div>
          
          
 <div class="comments" id="comments">
    <div id="disqus_thread">
        <noscript>
            不支持Javascript,那你还上啥网啊。
            <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript"></a>
        </noscript>
    </div>
</div>

      </div>
    </div>


    <div class="layui-col-md2 layui-col-lg2 layui-col-sm10 layui-col-xs12 catalogue-wrap">
        

<div class="catalogue-content">
    <div class="title">文章目录</div>
    <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Deepin%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BDNginx"><span class="toc-number">1.</span> <span class="toc-text">1.Deepin安装卸载Nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-CentOS%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">2.CentOS编译安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text">问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8systemctl%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">3.使用systemctl管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9F%A5%E6%89%BEnginx%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">4.查找nginx安装位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-403-Forbidden"><span class="toc-number">6.</span> <span class="toc-text">5.403 Forbidden</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Windows%E5%AE%89%E8%A3%85"><span class="toc-number">7.</span> <span class="toc-text">6.Windows安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98-1"><span class="toc-number">8.</span> <span class="toc-text">问题</span></a></li></ol>
    </div>
</div>


        <div class="sidecontent">

    

    <div class="side-panel side-sponsor">
        <div class="side-title one">小额赞助</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">本人提供免费与付费咨询服务，感谢您的支持！赞助请发邮件通知，方便公布您的善意！</div>
                <div class="content">
                    <img src="/images/pay.png" title="小额赞助"/>
                </div>
                
                
                <div class="donor_content">
                    
                        
                        <div class="donor-item">
                            <span class="name">**光</span>
                            <span class="money">3.01 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">Sun</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">bibichuan</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                    <div class="donor_footer">
                        <span>捐赠者名单</span>
                        <span class="total">合计：9.01 元</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title two">微信公众号</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <img src="/images/wechat.png" title="公众号"/>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title one">广告位</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">诚心邀请广大金主爸爸洽谈合作</div>
                <div class="detail">
                </div>
            </div>
        </div>
    </div>

    <div class="side-ask side-panel">
        
        <div class="side-title two">每日一省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">isNaN 和 Number.isNaN 函数的区别？</div>
                <div class="detail">
                    
                        <p>1.函数 isNaN 接收参数后，会尝试将这个参数转换为数值，任何不能被转换为数值的的值都会返回 true，因此非数字值传入也会返回 true ，会影响 NaN 的判断。</p>
                    
                        <p>2.函数 Number.isNaN 会首先判断传入参数是否为数字，如果是数字再继续判断是否为 NaN ，不会进行数据类型的转换，这种方法对于 NaN 的判断更为准确。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日二省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">为什么0.1+0.2 ! == 0.3，如何让其相等?</div>
                <div class="detail">
                     
                        <p>一个直接的解决方法就是设置一个误差范围，通常称为“机器精度”。对JavaScript来说，这个值通常为2-52，在ES6中，提供了Number.EPSILON属性，而它的值就是2-52，只要判断0.1+0.2-0.3是否小于Number.EPSILON，如果小于，就可以判断为0.1+0.2 ===0.3。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-8"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日三省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">== 操作符的强制类型转换规则？</div>
                <div class="detail">
                     
                        <p>1.首先会判断两者类型是否**相同，**相同的话就比较两者的大小。</p>
                    
                        <p>2.类型不相同的话，就会进行类型转换。</p>
                    
                        <p>3.会先判断是否在对比 null 和 undefined，是的话就会返回 true。</p>
                    
                        <p>4.判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number。</p>
                    
                        <p>5.判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断。</p>
                    
                        <p>6.判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-12"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title two">每日英语</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">Happiness is time precipitation, smile is the lonely sad.</div>
                <div class="detail">幸福是年华的沉淀，微笑是寂寞的悲伤。</div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2016</span>
                
                    <span class="side-footer-item side-button down" title="查看翻译">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                <span class="side-footer-item author">——— 美文</span>
            </div>
        </div>
    </div>

</div>
    </div>

  </div>
  <div class="side-tool">
    <div class="side-icon-wrap">
        <i class="iconfont icon-sidemenu"></i>
    </div>
    <ul class="side-tool-content">
        <li title="回到顶部" class="back-to-top side-tool-item">
            <a class="function-button"><i class="iconfont icon-backtop"></i></a>
        </li> 
        <li title="分享文章" class="side-share side-tool-item">
            <a class="function-button"><i class="iconfont icon-share"></i></a>
            <div class="iShare iShare-content"></div>
        </li>
        <li title="喜欢文章" class="side-like side-tool-item">
            <a class="function-button"><i class="iconfont icon-like"></i></a>
        </li>
         <li class="side-close" title="关闭侧边栏">
            <a class="function-button"><i class="iconfont icon-close"></i></a>
        </li>
    </ul>
</div>

      </div>
    </main>   
    
    <footer id="footer" class="footer layui-fluid">
      <div class="layui-row">
        <div class="container footer-inner">
          <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="footer-col">
  <div>温馨提示</div>
  <div><a href="/about" target="_self">关于作者</a></div>
  <div><a href="/archives">博客归档</a></div>
  <div>
    <span id="busuanzi_container_site_uv">
      访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
  </div>
</div>
<div class="footer-col">
  <div>友情链接</div>
  
  
  
  
    
        <div><a href="https://malagis.com" target="_blank">麻辣GIS</a></div>
    
  
    
        <div><a href="https://www.giserdqy.com" target="_blank">GIS开发者</a></div>
    
  
    
        <div><a href="https://earth.nullschool.net/zh-cn/" target="_blank">earth.nullschool</a></div>
    
  
    
        <div><a href="https://www.gisclouder.com/" target="_blank">码上GIS实现的热力图</a></div>
    
  
    
        <div><a href="http://www.cnblogs.com/naaoveGIS/" target="_blank">李晓辉的博客园</a></div>
    
  
    
        
          <div><a href="/links">更多</a></div>
          
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
  <div class="chain-msg">**注意：以上网站都没给钱**</div>
</div>
<div class="footer-col">
  <div>精彩推荐</div>
  
    <div><a href="/study">励志</a></div>
  
    <div><a href="/anime">动漫</a></div>
  
    <div><a href="/movie">电影</a></div>
  
    <div><a href="/tv">电视</a></div>
  
    <div><a href="/book">书籍</a></div>
  
</div>
<div class="footer-col">
  <div>开源项目</div>
  
    <div><a href="/"></a></div>
  
</div>
          
        </div>
      </div>
    </footer>

    


<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>

    
        
            
            
            <script type="text/javascript" src="/lib/layui/layui.js"></script>
        
    
        
    

    
        
            
            
                
            
            <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
        
    

    
        
            
            
            <script type="text/javascript" src="/lib/jquery.actual.min.js"></script>
        
    


    


  <script type="text/javascript" src="/js/src/utils.js?v="></script>



    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
<script type="text/javascript">
  var client = algoliasearch('DM9LMZOGZE', '1c2739694b8acb4c4edab8ccb098d166');
  var index = client.initIndex('bibichuan');
  $(document).ready(function(){
    var $search=$(".header-wrap");
    var $searchbtn= $search.find(".find");
    var $ipt=$search.find(".search-ipt");
    var $resultClear=$search.find(".clear");
    var $result=$search.find(".result");
    // 加入layui
    layui.use('layer', function(){
      var layer = layui.layer;
      // 搜索按钮点击
      $searchbtn.on("click",function(){
        var text=$ipt.val();
        var $this=$(this);
        var $resultContent=$result.find(".result-content");
        if(text){
          var loadDialog=layer.load();
          if(!$this.hasClass("disabled")){
            $this.addClass("disabled");
            index.search(text, (err, { hits } = {}) => {
              layer.close(loadDialog); 

              $this.removeClass("disabled");
              var resultHtml="";
              // 命中
              if(hits.length>0){
                var count=hits.length;
                for(var i=0;i<count;i++){
                  var h=hits[i];
                  //根据返回值中_highlightResult来判断显示的内容。
                  var content=h.contentStripTruncate;
                  var _highlight=h._highlightResult;

                  var resultC="";
                  var hitType=""; // 命中的类型
                  //标题命中
                  if(_highlight.title&&!resultC){  
                    if(_highlight.title.matchLevel&&_highlight.title.matchLevel!='none'){
                      resultC=_highlight.title.value;
                      hitType="title";
                    }
                  }
                  //分类命中
                  if(_highlight.categories&&!resultC){ 
                    var arr=_highlight.categories;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="categories";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="categories";
                      }
                    }
                  }

                  //标签命中
                  if(_highlight.tags&&!resultC){ 
                    var arr=_highlight.tags;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="tags";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="tags";
                      }
                    }
                  }

                  // 内容命中
                  if(!resultC){ 
                    resultC=_highlight.contentStripTruncate.value;
                    hitType="contentStripTruncate";
                  }

                  //如果内容过长，则截断
                  if(resultC.length>50){
                    var index=resultC.indexOf('<em>');
                    var blockIndex=10;
                    if(index>=blockIndex){
                      index=index-blockIndex;
                    }else{
                      index=0;
                    }
                    resultC="..."+resultC.substring(index,index+20+blockIndex)+"...";
                  }
                  switch(hitType){
                    case "title":
                      resultC="标题："+resultC;
                      break;
                    case "categories":
                      resultC="分类："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "tags":
                      resultC="标签："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "contentStripTruncate":
                      resultC="内容："+resultC;
                      break;
                  }

                  resultHtml+='<li class="result-item" title="'+content+'"><a href="'+h.permalink+'">'+resultC+'</a></li>';
                }
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }else{
                var resultHtml='<li class="result-item" title="未找到相关内容"><a>未找到相关内容</a></li>';
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }
            });
          }
        }else{
          layer.msg("请输入搜索内容");
        }
      });
      // 删除输入内容
      $resultClear.on("click",function(){
        $result.hide();
        $resultClear.hide();
        //清空输入内容
        $ipt.val("");
      });
      // 监听确定事件
      $ipt.keydown(function(e){
        if(e.keyCode==13){
          $searchbtn.click();
        }
      });
    });              
  
  });
</script>
    

    
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js"></script>
<script src="/js/src/post/post.js">></script>

  

  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = 'https://bibichuan.github.io/posts/f317c24.html';
      this.page.identifier = 'posts/f317c24.html';
      this.page.title = 'Nginx安装配置';
      };
    // 加载评论内容
    function loadComments () {
      var d = document, s = d.createElement('script');
      s.src = 'https://https-bibichuan-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);

      // 隐藏相关文章
      s.onload = function () {
        var relatedCommon=$('#comments #disqus_recommendations');
        if(relatedCommon){
          relatedCommon.hide();
        }

      }
    }
    function scrollFunction(){
      // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = $('#comments').offset().top - $(window).height();
          var scrollTop = $(window).scrollTop();

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            $(window).off('scroll',scrollFunction);
            loadComments();
          }
    }
    $(function () {
      if($("#comments").length<=0){
        return;
      }
      var offsetTop = $('#comments').offset().top - $(window).height();
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        loadComments();
      } else {
        $(window).on('scroll', scrollFunction);
      }
    });
  </script>



<script src="/lib/share/iShare.js"></script>
<script type="text/javascript">
var iSharel=(new iShare({container:'.iShare-content',config:{
		title: '这里有精彩的内容，你确定不过来看看吗？链接标题：Nginx安装配置 链接地址:https://bibichuan.github.io/posts/f317c24.html  |(复制此地址在浏览器中打开)——bibichaun出品。',
		description: 'Nginx安装配置',
		url: 'https://bibichuan.github.io/posts/f317c24.html',
		isAbroad: false,
		isTitle: true,
		initialized: true,
		WXoptions:{
			evenType: 'click',
			isTitleVisibility: true,
			title: 'Nginx安装配置',
			isTipVisibility: true,
			tip: 'Nginx安装配置',
			qrcodeW: '120',
			qrcodeH: '120',
			qrcodeFgc: '#4a148c',
      bgcolor: '#2BAD13'
		}
	}}));
</script>


</body>
</html>