<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TypeScript问题汇总</title>
    <!-- 页面描述 -->
<meta name="description" content=""/>
<!-- 页面关键词 -->
<meta name="keywords" content=""/>
<!-- 网页作者 -->
<meta name="author" content="bibichuan, ibibichuan@gmail.com"/>
<!-- 搜索引擎抓取 -->
<meta name="robots" content="index,follow"/>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>

<!--禁止百度转码-->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<!--启用WebApp全屏模式-->
<meta name="apple-mobile-web-app-capable" content="yes" />
<!--禁止数字自动识别为电话号码-->
<meta name="format-detection" content="telephone=no" />
<!--忽略识别邮箱-->
<meta name="format-detection" content="email=no" />
<!--360强制谷歌内核-->
<meta name="renderer" content="webkit"> 

<link rel="icon" href="/images/favicon.ico">

<link rel="stylesheet" href="//at.alicdn.com/t/font_1022896_nclaqhxyt.css">

<link href="/css/main.css" rel="stylesheet" type="text/css" />

<!-- 谷歌广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8382618401389723"></script>


<script type="text/javascript" id="hexo.configurations">
  var BTheme = window.BTheme ||{};
  var CONFIG = {
    root: '/'
  };
</script>

<!--百度统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ee4ff785c4c68fa9a0ea17241e0574ea";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!--谷歌统计-->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G4HPTST8XX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G4HPTST8XX');
</script>

    
    
        
    
        
            
            
            <link href="/lib/layui/css/layui.css" rel="stylesheet" type="text/css" />
        
    

    
        
    

    
        
    


    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" />
<link rel="stylesheet" type="text/css" href="/lib/share/style/css/ishare.css">

<meta name="generator" content="Hexo 5.4.2"></head>
<body class="main">

    <header id="header" class="header layui-fluid">
        <div class="header-inner layui-row"><div class="header-wrap">
    <div class="logo_wrap">
        <a href="/"><img src="/images/logo.png"></a>
    </div>
    <div class='search-warp'>
  <div class="search">
    <input class="search-ipt" placeholder="请输入搜索内容"/>
    <div class="search-btn clear"><i class="iconfont icon-guanbi"></i></div>
    <div class="search-btn find"><i class="iconfont icon-sousuo"></i></div>
  </div>
  <div class="result">
    <ul class="result-content"></ul>
  </div>
</div>
    <div class="icon-menu"><i class="iconfont icon-m_menu"></i></div>
    <nav class="site-nav">
        <ul class="menu layui-nav">
            
            
            <li class="menu-item layui-nav-item">
                <a href="/" rel="section">
                    <i class="iconfont icon-home"></i>首页<i class="iconfont icon-header-mobile icon-right"></i>
                </a>
            </li>
            
            

            
            

            
            
                
                
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E6%9D%82%E6%96%87/">
                                    杂文
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Python/">
                                    Python
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Gis/">
                                    Gis
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Asp/">
                                    Asp
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E8%BD%AF%E4%BB%B6/">
                                    软件
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <li class="more menu-item layui-nav-item">
                    
                    <a href="javascript:;" class="menu-more">
                        更多分类
                        <i class="iconfont icon-header-mobile icon-sidemenu"></i>
                    </a>
                    
                    <dl class="layui-nav-child">
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Java/">
                                            Java
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%89%8D%E7%AB%AF/">
                                            前端
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Javascript/">
                                            Javascript
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                            数据库
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
                                            操作系统
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Nodejs/">
                                            Nodejs
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">
                                            大数据
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1/">
                                            后台服务
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E9%9A%8F%E7%AC%94/">
                                            随笔
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">
                                            机器学习
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%85%B6%E4%BB%96/">
                                            其他
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                    </dl>
                </li>
            
        </ul>
    </nav>
</div></div>
    </header>
    
    <main class="main-content layui-fluid" id="main-content">
      <div class="main-inner">
        
  <div class="layui-row layui-col-space15">
    <div class="layui-col-xs12 layui-col-sm10 layui-col-sm-offset1 layui-col-md6 layui-col-md-offset2 layui-col-lg6 layui-col-lg-offset2">
        <div class="container post_wrap">
          <div class="post">
            <div class="article">
              <h1 class="title">TypeScript问题汇总</h1>
              <div class="author">
                <span class="tag">标签：
                  

                  
                    无
                  
                </span>
                <span class="tag">分类：
                  

                  
                    未分类
                  
                </span>
                <span class='tag'>
                  创建时间：2023-03-27 02:11:13
                </span>
                <span class='tag'>
                  更新时间：2025-04-28 14:37:40
                </span>
              </div>
              <div class="content">
                <html><head></head><body><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://ts.xcatliu.com/basics/declaration-files.html">声明文件</a></div>
<h1 id="1-Could-not-find-a-declaration-file-for-module"><a href="#1-Could-not-find-a-declaration-file-for-module" class="headerlink" title="1.Could not find a declaration file for module"></a>1.Could not find a declaration file for module</h1><p>“无法找到模块的声明文件” 这个就是因为文件不是ts文件</p>
<p>【解决方法】<br>1.如果有这个包的 ts 版本，安装ts版本</p>
<p>2.找到根目录下的 shims-vue-d.ts 文件，增加模块声明。如果没有 shims-vue-d 这个文件，那就找env.</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">'*.vue'</span> {</span><br><span class="line">  <span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Vue</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">// 加上这个</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">'xxx'</span></span><br></pre></td></tr></tbody></table></figure>

<p>3.如果不在乎外部库的类型，可以直接设为</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">'*'</span></span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43972437/article/details/106374235">ts：报错Could not find a declaration file for module xxx</a><br>2.<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903861828730888">Typescript给window对象添加全局变量 </a><br>3.<a target="_blank" rel="noopener" href="https://bobbyhadz.com/blog/typescript-property-does-not-exist-on-type-window">Property does not exist on type Window in TypeScript [Fixed]</a></div>
<h1 id="2-Property-‘xxx’-does-not-exist-on-type-‘-’"><a href="#2-Property-‘xxx’-does-not-exist-on-type-‘-’" class="headerlink" title="2.Property ‘xxx’ does not exist on type ‘{}’"></a>2.Property ‘xxx’ does not exist on type ‘{}’</h1><p>这个主要就是在调用某一个函数的时候出现这个错误提示,表明属性或者方法不存在，声明的 d.ts 文件中不包含这个属性或者方法。</p>
<p>【解决方法】<br>查看 d.ts 文件中声明的内容，是否包含了这个属性，并进行修改。</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/51377151/property-xxx-does-not-exist-on-type">Property ‘xxx’ does not exist on type ‘{}’</a></div>
<h1 id="3-property-xxx-does-not-exist-on-type-Object"><a href="#3-property-xxx-does-not-exist-on-type-Object" class="headerlink" title="3.property xxx does not exist on type Object"></a>3.property xxx does not exist on type Object</h1><p>不同于上面的那种报错，这个主要发生在使用一个对象作为参数的时候，会发生的事情。这是因为Typescript在执行代码检查时在该对象没有定义相应属性，遇到该报错有以下几种解决方式：</p>
<p>(1) 将对象类型设置为any</p>
<p>(2) 通过字符方式获取对象属性</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="attr">obj</span>: <span class="title class_">Object</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">obj[<span class="string">"xxx"</span>] = <span class="string">"xxx"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>(3) 通过接口定义对象所具有的属性</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="attr">obj</span>: xxxObject = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">obj.<span class="property">xxx</span>= <span class="string">"xxx"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> xxxObject {</span><br><span class="line">  <span class="attr">xxx</span>?: <span class="built_in">string</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>(4) 使用断言强制执行</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="attr">obj</span>: <span class="title class_">Object</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">(obj <span class="keyword">as</span> <span class="built_in">any</span>).<span class="property">xxx</span>= <span class="string">"xxx"</span>;</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/SmallTeddy/article/details/107164761">property xxx does not exist on type Object报错</a></div>
<h1 id="4-Object-literal-may-only-specify-known-properties"><a href="#4-Object-literal-may-only-specify-known-properties" class="headerlink" title="4.Object literal may only specify known properties"></a>4.Object literal may only specify known properties</h1><p>在使用对象字面量的时候：“Argument of type ‘{ key: string; name: string; }’ is not assignable to parameter of type ‘any[]’.  Object literal may only specify known properties, but ‘key’ does not exist in type ‘any[]’. Did you mean to write ‘keys’”。</p>
<p>当对象字面量中的属性在对象类型中不存在时，会发生“Object literal may only specify known properties”错误。 要解决该错误，请确保键入对象的所有属性并修复属性名称中的拼写错误（如果有）。例如：</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Employee</span> = {</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">emp</span>: <span class="title class_">Employee</span> = { <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'Alice'</span> };</span><br></pre></td></tr></tbody></table></figure>


<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://www.jiyik.com/tm/xwzj/prolan_2454.html">解决 TypeScript 中 Object literal may only specify known properties 错误</a></div>
<h1 id="5-声明文件的继承和扩展"><a href="#5-声明文件的继承和扩展" class="headerlink" title="5.声明文件的继承和扩展"></a>5.声明文件的继承和扩展</h1><p>就是说在别人写的d.ts文件的基础上增加自己的内容。</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/yanxiaomu/article/details/106787003">typescript 声明文件 继承扩展其他模块，扩展String等原生对象，函数不确定参数个数，json不确定属性</a></div>
<h1 id="6-Cannot-find-module-‘vue’-or-its-corresponding-type-declarations"><a href="#6-Cannot-find-module-‘vue’-or-its-corresponding-type-declarations" class="headerlink" title="6.Cannot find module ‘vue’ or its corresponding type declarations"></a>6.Cannot find module ‘vue’ or its corresponding type declarations</h1><p>在一个工程的 .d.ts 文件中，写了一段模块声明，这里的import,总是弹出上面的问题。</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">"*.vue"</span> {</span><br><span class="line">  <span class="keyword">import</span> { <span class="title class_">DefineComponent</span> } <span class="keyword">from</span> <span class="string">"vue"</span></span><br><span class="line">  <span class="comment">// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/ban-types</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">component</span>: <span class="title class_">DefineComponent</span>&lt;{}, {}, <span class="built_in">any</span>&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> component</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>【尝试】<br>1.我尝试了安装vue的声明文件，无效</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add -D @types/vue</span><br></pre></td></tr></tbody></table></figure>

<p>2.重启了vscode，无效</p>
<p>【解决方法】<br>后来我修改了import的位置，解决了这个错误提示</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将引入改到了这里</span></span><br><span class="line"><span class="keyword">import</span> { <span class="title class_">DefineComponent</span> } <span class="keyword">from</span> <span class="string">"vue"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">"*.vue"</span> {</span><br><span class="line">  <span class="comment">// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/ban-types</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">component</span>: <span class="title class_">DefineComponent</span>&lt;{}, {}, <span class="built_in">any</span>&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> component</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/54839057/vscode-showing-cannot-find-module-ts-error-for-vue-import-while-compiling-doe">VSCode showing “cannot find module” TS error for .vue import while compiling doesn’t</a><br>2.<a target="_blank" rel="noopener" href="https://juejin.cn/s/ts2307%20cannot%20find%20module%20%27vue%27%20or%20its%20corresponding%20type%20declarations">ts2307 cannot find module ‘vue’ or its corresponding type declarations</a> 安装 @vue/cli-plugin-typescript @vue/cli-service-global<br>3.<a target="_blank" rel="noopener" href="https://juejin.cn/s/error%20ts2307%20cannot%20find%20module%20%27vue%27%20or%20its%20corresponding%20type%20declarations">error ts2307 cannot find module ‘vue’ or its corresponding type declarations</a> 安装@type/vue<br>4.<a target="_blank" rel="noopener" href="https://blog.51cto.com/marsxh/4842853">终极解决TS 或者 Vetur 报错，Cannot find module ‘@/xx/xxx‘，找不到*.vue 等编译问题</a> 重启vscode</div>
<h2 id="7-Property-‘map’-does-not-exist-on-type-‘Window-amp-typeof-globalThis’"><a href="#7-Property-‘map’-does-not-exist-on-type-‘Window-amp-typeof-globalThis’" class="headerlink" title="7.Property ‘map’ does not exist on type ‘Window &amp; typeof globalThis’"></a>7.Property ‘map’ does not exist on type ‘Window &amp; typeof globalThis’</h2><p>这个主要是在 window 上挂载不存在的属性导致的错误。</p>
<p>【尝试】<br>1.尝试在env.d.ts文件中定义Window接口,无效</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给 window 挂载属性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mars3d <span class="keyword">from</span> <span class="string">"mars3d"</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Window</span> {</span><br><span class="line">  <span class="attr">map</span>: mars3d.<span class="property">Map</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2.尝试使用方括号的形式访问，出现了：“Element implicitly has an ‘any’ type because index expression is not of type ‘number’”</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>[<span class="string">"map"</span>] = map</span><br></pre></td></tr></tbody></table></figure>

<p>【解决方法】<br>这个方法主要就是在 env.d.ts 文件中增加如下的内容，除了声明interface之外，还要 declare global。这样就算是使用 window[“map”] 也不会报错了。</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mars3d <span class="keyword">from</span> <span class="string">"mars3d"</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">global</span> {  <span class="comment">//设置全局属性</span></span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">Window</span> {  <span class="comment">//window对象属性</span></span><br><span class="line">    <span class="attr">map</span>: mars3d.<span class="property">Map</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>还有种情况，就是连这个 env.d.ts 文件都无效。你在项目的根目录下创建了一个 env.d.ts 声明了上面的代码，本意就是要取消这个 map 变量不存在的警告，结果还是出现了。这个时候就要考虑是不是这个 env.d.ts生效了。需要在tsconfig.json文件中，通过 include 包含这个 env.d.ts 文件，比如我这里使用了 <em>.d.ts 代替。 如果这个 <em>。d.ts 放到了 src目录下，那就要在 include 中包括 “src/</em></em>/*.d.ts” 路径。</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">"include"</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">"packages/**/*.ts"</span><span class="punctuation">,</span> <span class="string">"*.d.ts"</span><span class="punctuation">,</span><span class="string">"src/**/*.ts"</span><span class="punctuation">,</span> <span class="string">"src/**/*.tsx"</span><span class="punctuation">,</span> <span class="string">"src/**/*.vue"</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/web_ding/article/details/115917414">完美解决：Property ‘XXX‘ does not exist on type ‘Window‘</a> Typescript complains that you do not have the property inside the data, you can either use any or create an inteface with that property。这里在全局上处理，会导致问题出现。<br>2.<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903861828730888">Typescript给window对象添加全局变量 </a> interface Window，这里说：declare global { interface Window } 实际上这个方法在typescript 3.4之后就无效了<br>3.<a target="_blank" rel="noopener" href="https://blog.csdn.net/w544924116/article/details/120251686">引用window自定义变量以及ts在window上自定义变量数据类型报错的解决方案</a><br>4.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35134066/article/details/121420692">vscode报错：找不到.d.ts中定义的名称</a> 这里使用的是 include 文件夹包裹进来了。<br>5.<a target="_blank" rel="noopener" href="https://blog.csdn.net/duansamve/article/details/126744623">React中使用window全局变量出现“Property ‘xx‘ does not exist on type ‘Window &amp; typeof globalThis‘.“</a> 在src目录下创建一个global.d.ts文件</div>
<h2 id="8-VSCode中的typescript版本"><a href="#8-VSCode中的typescript版本" class="headerlink" title="8.VSCode中的typescript版本"></a>8.VSCode中的typescript版本</h2><p>在解决上面一个问题的时候，我发现了新版和旧版的typescript可能在写法上有些区别，所以我就想着，要在vscode中，可以查看到typescript的版本。<br>(1) 选中一个.ts文件<br>(2) 点击右下角ts版本，鼠标放到那个Typescript前面的中扩号下，就可以出现版本选择了，可以看到我现在的typescript版本是4.9.5版本</p>
<img src="/images/loadimg.png" data-original="/posts/5a5f6af6/typescript_1.jpg" lay-src="/posts/5a5f6af6/typescript_1.jpg" class="" title="typescript版本">

<p>(3) 选择使用工作区版本，会在项目根目录中生成一个.vscode/setting.json文件</p>
<img src="/images/loadimg.png" data-original="/posts/5a5f6af6/typescript_2.jpg" lay-src="/posts/5a5f6af6/typescript_2.jpg" class="" title="typescript版本">

<p>(4) .vscode/setting.json文件内容如下：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"typescript.tsdk"</span><span class="punctuation">:</span> <span class="string">"node_modules/typescript/lib"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43459866/article/details/109791397">如何在VSCode中切换typescript的版本，使用工作空间的版本</a><br>2.<a target="_blank" rel="noopener" href="https://blog.miniasp.com/post/2016/08/19/Change-TypeScript-Versions-in-Visual-Studio-Code">如何修改 Visual Studio Code 內建的 TypeScript 版本</a> 只要有用到 Decorators 的地方，就會出現這個警示訊息，從錯誤訊息中可以得知，這個 Decorators 其實還是一個實驗性的功能，他未來可能會被加到 ECMAScript 2016 (ES7) 規格中，只是目前這份規格尚未推出正式版，因此才會顯示這個警告。只要到 tsconfig.json 設定 experimentalDecorators 為 true，照理說就可以消除這個錯誤訊息<br>3.<a target="_blank" rel="noopener" href="https://github.com/blucechen/blog/issues/11">VSCode中切换TS版本</a> typescript工程中会会使用默认的TS版本，该版本通常是VSCode中自带的版本(但版本可能会比较旧)，<br>这时通常需要切换到项目中依赖的TS版本<br>4.<a target="_blank" rel="noopener" href="https://juejin.cn/post/7021426842657619975">一觉睡醒，我vscode里的TypeScript项目全报错了 </a> vscode更新的时候，vscode本地使用的TypeScript也会更新（如果有新版本的话），vscode本地使用的ts版本，与我们项目中的ts版本很可能不一致。在Workspace Settings(JSON)中配置”typescript.tsdk”: “./node_modules/typescript/lib”，让vscode能找到项目中node_modules里安装的TypeScript版本。</div>
<h2 id="9-不能将类型“null”分配给类型“NodeListOf”"><a href="#9-不能将类型“null”分配给类型“NodeListOf”" class="headerlink" title="9.不能将类型“null”分配给类型“NodeListOf”"></a>9.不能将类型“null”分配给类型“NodeListOf<element>”</element></h2><p>为了清空 dom 引用，一般将 dom 使用完成之后，直接等于null, 浏览器就会释放，但是在typescript中，这里就会报错。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onst menuActive = <span class="function">(<span class="params">name</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">let</span> menus = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">'.menu-item'</span>);</span><br><span class="line">    menus.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> {</span><br><span class="line">      <span class="keyword">if</span> (item.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">'item-'</span> + name)) {</span><br><span class="line">        item.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">'active'</span>);</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">'active'</span>);</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">    <span class="comment">// 出问题的代码</span></span><br><span class="line">    menus = <span class="literal">null</span>;</span><br><span class="line">  };</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/xiebaochun/article/details/122449917">TypeScript——不能将类型“HTMLElement | null”分配给类型“HTMLElement”</a><br>2.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16652589/why-is-delete-not-allowed-in-javascript5-strict-mode">Why is delete not allowed in Javascript5 strict mode?</a> The delete statement is still allowed in strict mode, but some particular uses of it are erroneous. It’s only allowed for object properties, not simple names, and only for object properties that can be deleted.</div>
<h2 id="10-“-”运算符不能应用于类型-“symbol”"><a href="#10-“-”运算符不能应用于类型-“symbol”" class="headerlink" title="10.“+”运算符不能应用于类型 “symbol”"></a>10.“+”运算符不能应用于类型 “symbol”</h2><p>可以使用 toString() 方法将 Symbol 类型进行转换。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'main-'</span> + routeName?.<span class="title function_">toString</span>()</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://juejin.cn/post/7063390502330040351">TS从入门到放弃【三】：Symbol </a></div></body></html>
              </div>
            </div>
          </div>
          <div class='post-footer'>
            <div>**本文已结束，感谢您的观看**</div>
            <div class="btn btn-pay">鼓励一下</div>
          </div>
          
            <div class="page">
              
              <section class="past-wrap">
                <section class="past">
                <p>往期推荐</p>
                </section>
              </section>
              <div class="post-nav">
                <div class="post-nav-next post-nav-item">
                  
                    <a href="/posts/8b8e2602.html" rel="next" title="VMFusion问题汇总">
                      <i class="iconfont icon-prev"></i> VMFusion问题汇总
                    </a>
                  
                </div>

                <span class="post-nav-divider"></span>

                <div class="post-nav-prev post-nav-item">
                  
                    <a href="/posts/f859c875.html" rel="prev" title="Turfjs使用笔记">
                      Turfjs使用笔记 <i class="iconfont icon-next"></i>
                    </a>
                  
                </div>
              </div>
            </div>
          
          
 <div class="comments" id="comments">
    <div id="disqus_thread">
        <noscript>
            不支持Javascript,那你还上啥网啊。
            <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript"></a>
        </noscript>
    </div>
</div>

      </div>
    </div>


    <div class="layui-col-md2 layui-col-lg2 layui-col-sm10 layui-col-xs12 catalogue-wrap">
        

<div class="catalogue-content">
    <div class="title">文章目录</div>
    <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Could-not-find-a-declaration-file-for-module"><span class="toc-number">2.</span> <span class="toc-text">1.Could not find a declaration file for module</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Property-%E2%80%98xxx%E2%80%99-does-not-exist-on-type-%E2%80%98-%E2%80%99"><span class="toc-number">3.</span> <span class="toc-text">2.Property ‘xxx’ does not exist on type ‘{}’</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-property-xxx-does-not-exist-on-type-Object"><span class="toc-number">4.</span> <span class="toc-text">3.property xxx does not exist on type Object</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Object-literal-may-only-specify-known-properties"><span class="toc-number">5.</span> <span class="toc-text">4.Object literal may only specify known properties</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%A7%E6%89%BF%E5%92%8C%E6%89%A9%E5%B1%95"><span class="toc-number">6.</span> <span class="toc-text">5.声明文件的继承和扩展</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Cannot-find-module-%E2%80%98vue%E2%80%99-or-its-corresponding-type-declarations"><span class="toc-number">7.</span> <span class="toc-text">6.Cannot find module ‘vue’ or its corresponding type declarations</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Property-%E2%80%98map%E2%80%99-does-not-exist-on-type-%E2%80%98Window-amp-typeof-globalThis%E2%80%99"><span class="toc-number">7.1.</span> <span class="toc-text">7.Property ‘map’ does not exist on type ‘Window &amp; typeof globalThis’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-VSCode%E4%B8%AD%E7%9A%84typescript%E7%89%88%E6%9C%AC"><span class="toc-number">7.2.</span> <span class="toc-text">8.VSCode中的typescript版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E4%B8%8D%E8%83%BD%E5%B0%86%E7%B1%BB%E5%9E%8B%E2%80%9Cnull%E2%80%9D%E5%88%86%E9%85%8D%E7%BB%99%E7%B1%BB%E5%9E%8B%E2%80%9CNodeListOf%E2%80%9D"><span class="toc-number">7.3.</span> <span class="toc-text">9.不能将类型“null”分配给类型“NodeListOf”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E2%80%9C-%E2%80%9D%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8D%E8%83%BD%E5%BA%94%E7%94%A8%E4%BA%8E%E7%B1%BB%E5%9E%8B-%E2%80%9Csymbol%E2%80%9D"><span class="toc-number">7.4.</span> <span class="toc-text">10.“+”运算符不能应用于类型 “symbol”</span></a></li></ol></li></ol>
    </div>
</div>


        <div class="sidecontent">

    

    <div class="side-panel side-sponsor">
        <div class="side-title one">小额赞助</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">本人提供免费与付费咨询服务，感谢您的支持！赞助请发邮件通知，方便公布您的善意！</div>
                <div class="content">
                    <img src="/images/pay.png" title="小额赞助"/>
                </div>
                
                
                <div class="donor_content">
                    
                        
                        <div class="donor-item">
                            <span class="name">**光</span>
                            <span class="money">3.01 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">Sun</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">bibichuan</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                    <div class="donor_footer">
                        <span>捐赠者名单</span>
                        <span class="total">合计：9.01 元</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title two">微信公众号</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <img src="/images/wechat.png" title="公众号"/>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title one">广告位</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">诚心邀请广大金主爸爸洽谈合作</div>
                <div class="detail">
                </div>
            </div>
        </div>
    </div>

    <div class="side-ask side-panel">
        
        <div class="side-title two">每日一省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">isNaN 和 Number.isNaN 函数的区别？</div>
                <div class="detail">
                    
                        <p>1.函数 isNaN 接收参数后，会尝试将这个参数转换为数值，任何不能被转换为数值的的值都会返回 true，因此非数字值传入也会返回 true ，会影响 NaN 的判断。</p>
                    
                        <p>2.函数 Number.isNaN 会首先判断传入参数是否为数字，如果是数字再继续判断是否为 NaN ，不会进行数据类型的转换，这种方法对于 NaN 的判断更为准确。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日二省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">为什么0.1+0.2 ! == 0.3，如何让其相等?</div>
                <div class="detail">
                     
                        <p>一个直接的解决方法就是设置一个误差范围，通常称为“机器精度”。对JavaScript来说，这个值通常为2-52，在ES6中，提供了Number.EPSILON属性，而它的值就是2-52，只要判断0.1+0.2-0.3是否小于Number.EPSILON，如果小于，就可以判断为0.1+0.2 ===0.3。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-8"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日三省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">== 操作符的强制类型转换规则？</div>
                <div class="detail">
                     
                        <p>1.首先会判断两者类型是否**相同，**相同的话就比较两者的大小。</p>
                    
                        <p>2.类型不相同的话，就会进行类型转换。</p>
                    
                        <p>3.会先判断是否在对比 null 和 undefined，是的话就会返回 true。</p>
                    
                        <p>4.判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number。</p>
                    
                        <p>5.判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断。</p>
                    
                        <p>6.判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-12"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title two">每日英语</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">Happiness is time precipitation, smile is the lonely sad.</div>
                <div class="detail">幸福是年华的沉淀，微笑是寂寞的悲伤。</div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2016</span>
                
                    <span class="side-footer-item side-button down" title="查看翻译">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                <span class="side-footer-item author">——— 美文</span>
            </div>
        </div>
    </div>

</div>
    </div>

  </div>
  <div class="side-tool">
    <div class="side-icon-wrap">
        <i class="iconfont icon-sidemenu"></i>
    </div>
    <ul class="side-tool-content">
        <li title="回到顶部" class="back-to-top side-tool-item">
            <a class="function-button"><i class="iconfont icon-backtop"></i></a>
        </li> 
        <li title="分享文章" class="side-share side-tool-item">
            <a class="function-button"><i class="iconfont icon-share"></i></a>
            <div class="iShare iShare-content"></div>
        </li>
        <li title="喜欢文章" class="side-like side-tool-item">
            <a class="function-button"><i class="iconfont icon-like"></i></a>
        </li>
         <li class="side-close" title="关闭侧边栏">
            <a class="function-button"><i class="iconfont icon-close"></i></a>
        </li>
    </ul>
</div>

      </div>
    </main>   
    
    <footer id="footer" class="footer layui-fluid">
      <div class="layui-row">
        <div class="container footer-inner">
          <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="footer-col">
  <div>温馨提示</div>
  <div><a href="/about" target="_self">关于作者</a></div>
  <div><a href="/archives">博客归档</a></div>
  <div>
    <span id="busuanzi_container_site_uv">
      访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
  </div>
</div>
<div class="footer-col">
  <div>友情链接</div>
  
  
  
  
    
        <div><a href="https://malagis.com" target="_blank">麻辣GIS</a></div>
    
  
    
        <div><a href="https://www.giserdqy.com" target="_blank">GIS开发者</a></div>
    
  
    
        <div><a href="https://earth.nullschool.net/zh-cn/" target="_blank">earth.nullschool</a></div>
    
  
    
        <div><a href="https://www.gisclouder.com/" target="_blank">码上GIS实现的热力图</a></div>
    
  
    
        <div><a href="http://www.cnblogs.com/naaoveGIS/" target="_blank">李晓辉的博客园</a></div>
    
  
    
        
          <div><a href="/links">更多</a></div>
          
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
  <div class="chain-msg">**注意：以上网站都没给钱**</div>
</div>
<div class="footer-col">
  <div>精彩推荐</div>
  
    <div><a href="/study">励志</a></div>
  
    <div><a href="/anime">动漫</a></div>
  
    <div><a href="/movie">电影</a></div>
  
    <div><a href="/tv">电视</a></div>
  
    <div><a href="/book">书籍</a></div>
  
</div>
<div class="footer-col">
  <div>开源项目</div>
  
    <div><a href="/"></a></div>
  
</div>
          
        </div>
      </div>
    </footer>

    


<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>

    
        
            
            
            <script type="text/javascript" src="/lib/layui/layui.js"></script>
        
    
        
    

    
        
            
            
                
            
            <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
        
    

    
        
            
            
            <script type="text/javascript" src="/lib/jquery.actual.min.js"></script>
        
    


    


  <script type="text/javascript" src="/js/src/utils.js?v="></script>



    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
<script type="text/javascript">
  var client = algoliasearch('DM9LMZOGZE', '1c2739694b8acb4c4edab8ccb098d166');
  var index = client.initIndex('bibichuan');
  $(document).ready(function(){
    var $search=$(".header-wrap");
    var $searchbtn= $search.find(".find");
    var $ipt=$search.find(".search-ipt");
    var $resultClear=$search.find(".clear");
    var $result=$search.find(".result");
    // 加入layui
    layui.use('layer', function(){
      var layer = layui.layer;
      // 搜索按钮点击
      $searchbtn.on("click",function(){
        var text=$ipt.val();
        var $this=$(this);
        var $resultContent=$result.find(".result-content");
        if(text){
          var loadDialog=layer.load();
          if(!$this.hasClass("disabled")){
            $this.addClass("disabled");
            index.search(text, (err, { hits } = {}) => {
              layer.close(loadDialog); 

              $this.removeClass("disabled");
              var resultHtml="";
              // 命中
              if(hits.length>0){
                var count=hits.length;
                for(var i=0;i<count;i++){
                  var h=hits[i];
                  //根据返回值中_highlightResult来判断显示的内容。
                  var content=h.contentStripTruncate;
                  var _highlight=h._highlightResult;

                  var resultC="";
                  var hitType=""; // 命中的类型
                  //标题命中
                  if(_highlight.title&&!resultC){  
                    if(_highlight.title.matchLevel&&_highlight.title.matchLevel!='none'){
                      resultC=_highlight.title.value;
                      hitType="title";
                    }
                  }
                  //分类命中
                  if(_highlight.categories&&!resultC){ 
                    var arr=_highlight.categories;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="categories";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="categories";
                      }
                    }
                  }

                  //标签命中
                  if(_highlight.tags&&!resultC){ 
                    var arr=_highlight.tags;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="tags";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="tags";
                      }
                    }
                  }

                  // 内容命中
                  if(!resultC){ 
                    resultC=_highlight.contentStripTruncate.value;
                    hitType="contentStripTruncate";
                  }

                  //如果内容过长，则截断
                  if(resultC.length>50){
                    var index=resultC.indexOf('<em>');
                    var blockIndex=10;
                    if(index>=blockIndex){
                      index=index-blockIndex;
                    }else{
                      index=0;
                    }
                    resultC="..."+resultC.substring(index,index+20+blockIndex)+"...";
                  }
                  switch(hitType){
                    case "title":
                      resultC="标题："+resultC;
                      break;
                    case "categories":
                      resultC="分类："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "tags":
                      resultC="标签："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "contentStripTruncate":
                      resultC="内容："+resultC;
                      break;
                  }

                  resultHtml+='<li class="result-item" title="'+content+'"><a href="'+h.permalink+'">'+resultC+'</a></li>';
                }
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }else{
                var resultHtml='<li class="result-item" title="未找到相关内容"><a>未找到相关内容</a></li>';
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }
            });
          }
        }else{
          layer.msg("请输入搜索内容");
        }
      });
      // 删除输入内容
      $resultClear.on("click",function(){
        $result.hide();
        $resultClear.hide();
        //清空输入内容
        $ipt.val("");
      });
      // 监听确定事件
      $ipt.keydown(function(e){
        if(e.keyCode==13){
          $searchbtn.click();
        }
      });
    });              
  
  });
</script>
    

    
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js"></script>
<script src="/js/src/post/post.js">></script>

  

  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = 'https://bibichuan.github.io/posts/5a5f6af6.html';
      this.page.identifier = 'posts/5a5f6af6.html';
      this.page.title = 'TypeScript问题汇总';
      };
    // 加载评论内容
    function loadComments () {
      var d = document, s = d.createElement('script');
      s.src = 'https://https-bibichuan-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);

      // 隐藏相关文章
      s.onload = function () {
        var relatedCommon=$('#comments #disqus_recommendations');
        if(relatedCommon){
          relatedCommon.hide();
        }

      }
    }
    function scrollFunction(){
      // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = $('#comments').offset().top - $(window).height();
          var scrollTop = $(window).scrollTop();

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            $(window).off('scroll',scrollFunction);
            loadComments();
          }
    }
    $(function () {
      if($("#comments").length<=0){
        return;
      }
      var offsetTop = $('#comments').offset().top - $(window).height();
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        loadComments();
      } else {
        $(window).on('scroll', scrollFunction);
      }
    });
  </script>



<script src="/lib/share/iShare.js"></script>
<script type="text/javascript">
var iSharel=(new iShare({container:'.iShare-content',config:{
		title: '这里有精彩的内容，你确定不过来看看吗？链接标题：TypeScript问题汇总 链接地址:https://bibichuan.github.io/posts/5a5f6af6.html  |(复制此地址在浏览器中打开)——bibichaun出品。',
		description: 'TypeScript问题汇总',
		url: 'https://bibichuan.github.io/posts/5a5f6af6.html',
		isAbroad: false,
		isTitle: true,
		initialized: true,
		WXoptions:{
			evenType: 'click',
			isTitleVisibility: true,
			title: 'TypeScript问题汇总',
			isTipVisibility: true,
			tip: 'TypeScript问题汇总',
			qrcodeW: '120',
			qrcodeH: '120',
			qrcodeFgc: '#4a148c',
      bgcolor: '#2BAD13'
		}
	}}));
</script>


</body>
</html>