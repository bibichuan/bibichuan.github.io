<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Linux安装PHP</title>
    <!-- 页面描述 -->
<meta name="description" content=""/>
<!-- 页面关键词 -->
<meta name="keywords" content=""/>
<!-- 网页作者 -->
<meta name="author" content="bibichuan, ibibichuan@gmail.com"/>
<!-- 搜索引擎抓取 -->
<meta name="robots" content="index,follow"/>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>

<!--禁止百度转码-->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<!--启用WebApp全屏模式-->
<meta name="apple-mobile-web-app-capable" content="yes" />
<!--禁止数字自动识别为电话号码-->
<meta name="format-detection" content="telephone=no" />
<!--忽略识别邮箱-->
<meta name="format-detection" content="email=no" />
<!--360强制谷歌内核-->
<meta name="renderer" content="webkit"> 

<link rel="icon" href="/images/favicon.ico">

<link rel="stylesheet" href="//at.alicdn.com/t/font_1022896_nclaqhxyt.css">

<link href="/css/main.css" rel="stylesheet" type="text/css" />

<!-- 谷歌广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8382618401389723"></script>


<script type="text/javascript" id="hexo.configurations">
  var BTheme = window.BTheme ||{};
  var CONFIG = {
    root: '/'
  };
</script>

<!--百度统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ee4ff785c4c68fa9a0ea17241e0574ea";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!--谷歌统计-->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G4HPTST8XX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G4HPTST8XX');
</script>

    
    
        
    
        
            
            
            <link href="/lib/layui/css/layui.css" rel="stylesheet" type="text/css" />
        
    

    
        
    

    
        
    


    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" />
<link rel="stylesheet" type="text/css" href="/lib/share/style/css/ishare.css">

<meta name="generator" content="Hexo 5.4.2"></head>
<body class="main">

    <header id="header" class="header layui-fluid">
        <div class="header-inner layui-row"><div class="header-wrap">
    <div class="logo_wrap">
        <a href="/"><img src="/images/logo.png"></a>
    </div>
    <div class='search-warp'>
  <div class="search">
    <input class="search-ipt" placeholder="请输入搜索内容"/>
    <div class="search-btn clear"><i class="iconfont icon-guanbi"></i></div>
    <div class="search-btn find"><i class="iconfont icon-sousuo"></i></div>
  </div>
  <div class="result">
    <ul class="result-content"></ul>
  </div>
</div>
    <div class="icon-menu"><i class="iconfont icon-m_menu"></i></div>
    <nav class="site-nav">
        <ul class="menu layui-nav">
            
            
            <li class="menu-item layui-nav-item">
                <a href="/" rel="section">
                    <i class="iconfont icon-home"></i>首页<i class="iconfont icon-header-mobile icon-right"></i>
                </a>
            </li>
            
            

            
            

            
            
                
                
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E6%9D%82%E6%96%87/">
                                    杂文
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Python/">
                                    Python
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Gis/">
                                    Gis
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Asp/">
                                    Asp
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E8%BD%AF%E4%BB%B6/">
                                    软件
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <li class="more menu-item layui-nav-item">
                    
                    <a href="javascript:;" class="menu-more">
                        更多分类
                        <i class="iconfont icon-header-mobile icon-sidemenu"></i>
                    </a>
                    
                    <dl class="layui-nav-child">
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Java/">
                                            Java
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%89%8D%E7%AB%AF/">
                                            前端
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Javascript/">
                                            Javascript
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                            数据库
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
                                            操作系统
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Nodejs/">
                                            Nodejs
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">
                                            大数据
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1/">
                                            后台服务
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E9%9A%8F%E7%AC%94/">
                                            随笔
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">
                                            机器学习
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%85%B6%E4%BB%96/">
                                            其他
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                    </dl>
                </li>
            
        </ul>
    </nav>
</div></div>
    </header>
    
    <main class="main-content layui-fluid" id="main-content">
      <div class="main-inner">
        
  <div class="layui-row layui-col-space15">
    <div class="layui-col-xs12 layui-col-sm10 layui-col-sm-offset1 layui-col-md6 layui-col-md-offset2 layui-col-lg6 layui-col-lg-offset2">
        <div class="container post_wrap">
          <div class="post">
            <div class="article">
              <h1 class="title">Linux安装PHP</h1>
              <div class="author">
                <span class="tag">标签：
                  

                  
                    无
                  
                </span>
                <span class="tag">分类：
                  

                  
                    未分类
                  
                </span>
                <span class='tag'>
                  创建时间：2021-11-21 00:51:30
                </span>
                <span class='tag'>
                  更新时间：2025-04-28 14:37:40
                </span>
              </div>
              <div class="content">
                <html><head></head><body><h1 id="1-前言"><a href="#1-前言" class="headerlink" title="1.前言"></a>1.前言</h1><p>～我这里在 CentOS8.0 上编译安装 PHP 8.0.13,安装路径为 /usr/local/php～ ，刚开始我确实是在CentOS8中安装等PHP8，但是后来发现，原先他们写的程序运行不了，只能降级了，降级到了PHP7.3.33,降级到7.3.33  也还是不行，只能降级到7.2.9，<a target="_blank" rel="noopener" href="https://www.php.net/releases/">历史版本</a>。</p>
<p>我在RocyLinux9上安装，开始安装了php8,结果因为sqlserver驱动的问题，降到了 7.2.9，结果还是不行，后来我把 openssl 从 3.0降到了 1.1.1k,结果 php 无论如何都编译不通过了，只能另寻他法了，我尝试再次降级php，直接降级到了 5.6.40。</p>
<ul>
<li>PHP 7.2.9</li>
<li>OpenSSL 1.1.1k</li>
<li>pdo_sqlsrv 5.8.1</li>
</ul>
<h1 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2.安装依赖"></a>2.安装依赖</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install -y libxml2-devel openssl-devel libcurl-devel gd gd-devel libmcrypt libmcrypt-devel libtool sqlite-devel libicu-devel gcc-c++ glibc-headers libxslt-devel libjpeg-devel libzip-devel bzip2-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rocky Linux 9 这样安装</span></span><br><span class="line">dnf config-manager --<span class="built_in">enable</span> crb</span><br><span class="line">dnf --enablerepo=crb install oniguruma-devel</span><br><span class="line"><span class="comment"># 早期版本</span></span><br><span class="line">dnf --enablerepo=powertools install oniguruma-devel</span><br></pre></td></tr></tbody></table></figure>

<p>缺什么依赖，就安装什么依赖</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://forum.directadmin.com/threads/php-7-4-error-installed.66519/">php 7.4 error installed</a><br>【2】.<a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/678777/how-to-get-epel-release-epel-release-next-powertools-in-centos-stream-9">How to get epel-release / epel-release-next / powertools in CentOS Stream 9</a><br>【3】.<a target="_blank" rel="noopener" href="https://forums.rockylinux.org/t/how-do-i-install-powertools-on-rocky-linux-9/7427">How do I install PowerTools on Rocky Linux 9</a> Powertools is known as crb under RL9. dnf config-manager –enable crb </div>
<h1 id="3-下载"><a href="#3-下载" class="headerlink" title="3.下载"></a>3.下载</h1><p><a target="_blank" rel="noopener" href="https://www.php.net/downloads.php">下载文件</a></p>
<h1 id="4-配置"><a href="#4-配置" class="headerlink" title="4.配置"></a>4.配置</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## PHP 8.0配置</span></span><br><span class="line">./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc \</span><br><span class="line">--with-curl --with-freetype --enable-gd --with-jpeg  --with-gettext --with-kerberos --with-libdir=lib64 --with-libxml \</span><br><span class="line">--with-mysqli --with-openssl --with-pdo-mysql  --with-pdo-sqlite --with-pear --enable-sockets --with-mhash --with-ldap-sasl \</span><br><span class="line">--with-xsl --with-zlib --with-zip -with-bz2 --with-iconv  --enable-fpm --enable-pdo  --enable-bcmath  --enable-mbregex \</span><br><span class="line">--enable-mbstring --enable-opcache --enable-pcntl  --enable-shmop --enable-soap --enable-sockets --enable-sysvsem \</span><br><span class="line">--enable-xml --enable-sysvsem --enable-cli --enable-opcache --enable-intl --enable-calendar --enable-static --enable-mysqlnd</span><br><span class="line"></span><br><span class="line"><span class="comment">## 自定义openssl</span></span><br><span class="line">./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc \</span><br><span class="line">--with-curl --with-freetype --enable-gd --with-jpeg  --with-gettext --with-kerberos --with-libdir=lib64 --with-libxml \</span><br><span class="line">--with-mysqli --with-openssl --with-openssl-dir=/usr/local/ssl --with-pdo-mysql  --with-pdo-sqlite --with-pear --enable-sockets --with-mhash --with-ldap-sasl \</span><br><span class="line">--with-xsl --with-zlib --with-zip -with-bz2 --with-iconv  --enable-fpm --enable-pdo  --enable-bcmath  --enable-mbregex \</span><br><span class="line">--enable-mbstring --enable-opcache --enable-pcntl  --enable-shmop --enable-soap --enable-sockets --enable-sysvsem \</span><br><span class="line">--enable-xml --enable-sysvsem --enable-cli --enable-opcache --enable-intl --enable-calendar --enable-static --enable-mysqlnd</span><br><span class="line"></span><br><span class="line"><span class="comment">## PHP 7.2配置</span></span><br><span class="line">./configure --prefix=/usr/local/php --exec-prefix=/usr/local/php --bindir=/usr/local/php/bin --sbindir=/usr/local/php/sbin --includedir=/usr/local/php/include --libdir=/usr/local/php/lib/php --mandir=/usr/local/php/php/man --with-config-file-path=/usr/local/php/etc -with-libxml-dir=/usr --with-iconv-dir --with-mhash --with-openssl --with-mysqli --with-pdo-mysql --with-gd --with-iconv --with-zlib --enable-zip --enable-inline-optimization --disable-debug --disable-rpath --enable-shared --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-mbregex --enable-mbstring --enable-ftp --enable-pcntl --enable-sockets --with-xmlrpc --enable-soap --without-pear --with-gettext --enable-session --with-curl --with-jpeg-dir --with-freetype-dir --enable-opcache --enable-fpm  --without-gdbm --disable-fileinfo --with-xsl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">./configure --prefix=/usr/local/php --exec-prefix=/usr/local/php --bindir=/usr/local/php/bin --sbindir=/usr/local/php/sbin --includedir=/usr/local/php/include --libdir=/usr/local/php/lib/php --mandir=/usr/local/php/php/man --with-config-file-path=/usr/local/php/etc -with-libxml-dir=/usr --with-iconv-dir --with-mhash --with-openssl --with-openssl-dir=/usr/local/openssl --with-gd --with-iconv --with-zlib --enable-zip --enable-inline-optimization --disable-debug --disable-rpath --enable-shared --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-mbregex --enable-mbstring --enable-ftp --enable-pcntl --enable-sockets --with-xmlrpc --enable-soap --without-pear --with-gettext --enable-session --with-curl --with-jpeg-dir --with-freetype-dir --enable-opcache --enable-fpm  --without-gdbm --disable-fileinfo --with-xsl</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/l75790/p/12804316.html">安装篇六：安装PHP(7.2.29版本) </a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_35827671/article/details/115171323">php7.2编译参数,php 7.2 编译安装</a></div>
<h1 id="5-安装"><a href="#5-安装" class="headerlink" title="5.安装"></a>5.安装</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></tbody></table></figure>

<h1 id="6-生成配置文件"><a href="#6-生成配置文件" class="headerlink" title="6.生成配置文件"></a>6.生成配置文件</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 生成php配置文件</span></span><br><span class="line"><span class="built_in">cp</span> php.ini-production /usr/local/php/etc/php.ini</span><br><span class="line"><span class="comment">## 生成www配置文件</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/php/etc/php-fpm.d/</span><br><span class="line"><span class="built_in">cp</span> www.conf.default www.conf</span><br><span class="line"><span class="comment">## 生成php-fpm配置文件</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/php/etc</span><br><span class="line"><span class="built_in">cp</span> php-fpm.conf.default php-fpm.conf</span><br><span class="line"><span class="comment">## 生成php-fpm服务启动文件,从源码路径拷贝</span></span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/php/daemon</span><br><span class="line"><span class="comment">## 根据安装的版本</span></span><br><span class="line"><span class="built_in">cp</span> /home/soft/php-8.0.13/sapi/fpm/init.d.php-fpm /usr/local/php/daemon/php-fpm</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> 740 /usr/local/php/daemon/php-fpm</span><br></pre></td></tr></tbody></table></figure>

<h1 id="7-启动"><a href="#7-启动" class="headerlink" title="7.启动"></a>7.启动</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/php/daemon/php-fpm start</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看启动</span></span><br><span class="line">ps auxfww | grep php | grep -v grep</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看端口</span></span><br><span class="line">ss -lntp | grep php</span><br><span class="line"></span><br><span class="line"><span class="comment">## 停止</span></span><br><span class="line">/usr/local/php/daemon/php-fpm stop</span><br><span class="line"></span><br><span class="line"><span class="comment">## 配置开机自启，我暂时没有试</span></span><br><span class="line">vi /lib/systemd/system/php.service</span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=The PHP FastCGI Process Manager</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/usr/local/php/var/run/php-fpm.pid</span><br><span class="line">ExecStart=/usr/local/php/daemon/php-fpm start</span><br><span class="line">ExecReload=/usr/local/php/daemon/php-fpm restart</span><br><span class="line">ExecStop=/usr/local/php/daemon/php-fpm stop</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开机启动</span></span><br><span class="line">systemctl start php</span><br><span class="line">systemctl stop php</span><br><span class="line">systemctl <span class="built_in">enable</span> php</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42478311/article/details/129898228">php-fpm开机自启动详细教程</a></div>
<h1 id="8-nginx配置"><a href="#8-nginx配置" class="headerlink" title="8.nginx配置"></a>8.nginx配置</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server {</span><br><span class="line">        listen       8003;</span><br><span class="line">        root   /data/web/phpweb/html;</span><br><span class="line"></span><br><span class="line">        location ~ \.php {</span><br><span class="line">                fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">                fastcgi_index  index.php;</span><br><span class="line">                fastcgi_param  SCRIPT_FILENAME  $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">                include        fastcgi_params;</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenppp/p/13388748.html">CentOS-7 编译安装php-7.4</a><br>2.<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/73cbf5237134">CentOS 源码编译安装 PHP</a><br>3.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/architectforest/p/14048487.html">linux(centos8):编译安装php8.0正式版并启用jit及php8安装时的报错处理（centos8.2 / php8.0.0 ）</a> 里面还有遇到问题的解决方法，比如：’icu-uc’、’icu-io’<br>4.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/gyfluck/p/10538330.html">configure: error: C++ preprocessor “/lib/cpp” fails sanity check</a><br>5.<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangge3663/article/details/120150496">Package ‘oniguruma’, required by ‘virtual:world’, not found</a><br>6.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/architectforest/p/12433541.html">centos8安装php7.4 </a></div>
<h1 id="9-SQLServer驱动"><a href="#9-SQLServer驱动" class="headerlink" title="9.SQLServer驱动"></a>9.SQLServer驱动</h1><p>因为我才用的是编译安装PHP的方法，所以pecl可能使不上力，只能靠蛮力了。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 加入微软源</span></span><br><span class="line">curl https://packages.microsoft.com/config/rhel/7/prod.repo &gt; /etc/yum.repos.d/mssqlrelease.repo</span><br><span class="line"><span class="comment">## 卸载原有版本</span></span><br><span class="line">yum remove unixODBC </span><br><span class="line"><span class="comment">## 安装驱动</span></span><br><span class="line">yum install msodbcsql mssql-tools unixODBC-devel</span><br><span class="line"></span><br><span class="line"><span class="comment">## 下载pdo_sqlser扩展包，安装</span></span><br><span class="line"><span class="comment">#下载扩展包</span></span><br><span class="line">wget http://pecl.php.net/get/pdo_sqlsrv-5.12.0.tgz</span><br><span class="line"><span class="comment">#解压扩展包</span></span><br><span class="line">tar -zxvf pdo_sqlsrv-5.12.0.tgz</span><br><span class="line"><span class="comment">#进入解压目录</span></span><br><span class="line"><span class="built_in">cd</span> pdo_sqlsrv-5.12.0</span><br><span class="line"><span class="comment">#执行PHP的一个扩展命令</span></span><br><span class="line">/usr/local/php/bin/phpize</span><br><span class="line"><span class="comment">#编译</span></span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 添加pdo_sqlsrv扩展</span></span><br><span class="line"><span class="comment"># 修改 php.ini 文件</span></span><br><span class="line">vi /usr/local/php/etc/php.ini</span><br><span class="line"><span class="comment"># 添加 </span></span><br><span class="line">extension=pdo_sqlsrv.so</span><br><span class="line"></span><br><span class="line"><span class="comment">## 下载sqlser扩展包，安装</span></span><br><span class="line"><span class="comment">#下载扩展包</span></span><br><span class="line">wget http://pecl.php.net/get/sqlsrv-5.12.0.tgz</span><br><span class="line"><span class="comment">#解压扩展包</span></span><br><span class="line">tar -zxvf sqlsrv-5.12.0.tgz</span><br><span class="line"><span class="comment">#进入解压目录</span></span><br><span class="line"><span class="built_in">cd</span> sqlsrv-5.12.0</span><br><span class="line"><span class="comment">#执行PHP的一个扩展命令</span></span><br><span class="line">/usr/local/php/bin/phpize</span><br><span class="line"><span class="comment">#编译</span></span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">## 添加sqlsrv扩展</span></span><br><span class="line"><span class="comment"># 修改php.ini </span></span><br><span class="line">vim /usr/local/php/etc/php.ini</span><br><span class="line"><span class="comment"># 添加 </span></span><br><span class="line">extension=sqlsrv.so</span><br><span class="line"></span><br><span class="line"><span class="comment">## 重启php</span></span><br></pre></td></tr></tbody></table></figure>

<p>一系列鬼操作，sqlserver的驱动终于是安装上了。</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37398747/article/details/112673722">PHP7 安装sqlsrv、pdo_sqlsrv扩展 centos</a> 这篇文章绝了</div>
<h1 id="10-MySQL驱动"><a href="#10-MySQL驱动" class="headerlink" title="10.MySQL驱动"></a>10.MySQL驱动</h1><p><strong>直接看下面的解决方案吧，因为mysql路径的问题，我没有重新编译成功mysql的驱动</strong></p>
<p>可能我在编译的时候，没有把mysql的编译选项弄好，所以最后导致了没有mysql驱动，这是使用和安装sql server的方式类似的方法进行的，在安装编译完成了php之后，重新进行了mysql驱动配置。但是我在重新配置的时候，还是遇到了问题，就是这个 –with-pdo-mysql 参数的问题，我其实没有安装mysql的，这个时候该怎么指定mysql的路径呢？</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装mysql驱动</span></span><br><span class="line">yum install mysql-devel</span><br><span class="line">yum install php-mysqlnd</span><br><span class="line"></span><br><span class="line"><span class="comment">## 下载</span></span><br><span class="line">wget http://pecl.php.net/get/PDO_MYSQL-1.0.2.tgz</span><br><span class="line"><span class="comment">## 解压</span></span><br><span class="line">tar zxvf PDO_MYSQL-1.0.2.tgz</span><br><span class="line"><span class="comment">## 进入目录</span></span><br><span class="line"><span class="built_in">cd</span> PDO_MYSQL-1.0.2</span><br><span class="line"><span class="comment">## 初始化配置</span></span><br><span class="line">/usr/local/php/bin/phpize</span><br><span class="line"><span class="comment">## 重新编译</span></span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config  --with-pdo-mysql=mysqlnd</span><br><span class="line"></span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config  --with-pdo-mysql=/usr</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"><span class="comment">## 编辑配置文件</span></span><br><span class="line">vi /usr/local/php/etc/php.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找到 extentions 这一个配置段， 接着增加 pdo_mysql.so 就行了</span></span><br><span class="line">extension = pdo_mysql.so</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/whendream/p/php-pdo-mysql-driver.html">为PHP增加PDO-Mysql驱动</a> 要mysql路径的<br>【2】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/fjping0606/p/4760793.html">编译安装php时提示Cannot find MySQL header files的解决方法</a><br>【3】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39944515/article/details/113477021">php链接mysql的驱动包_php中的连接mysql驱动类</a><br>【4】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/centos2017/p/7896725.html">php 安装 pdo_mysql</a> 安装pdo_mysql, –with-pdo-mysql=/usr/local/mysql, –with-mysql=/usr  这个参数<br>使用find命令寻找mysql客户端安装目录,这里只需要写–with-mysql=/usr</div>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># find / -name mysql.h</span><br><span class="line">/usr/include/mysql/mysql.h</span><br></pre></td></tr></tbody></table></figure>

<p>【5】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/dqchouyang/article/details/85109420">CentOS安装pdo_mysql</a> 这是找不到mysql的头文件了，需要建一个软连接,ln -s /usr/include/mysql/* /usr/local/include/<br>【6】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/gqdw/p/3763150.html">php的 mysqlnd驱动</a> php5.3之后支持一个叫mysqlnd的东西，是php 自带的连接mysql 的方式，更快的执行速度，更少的内存消耗。<br>【7】.<a target="_blank" rel="noopener" href="https://www.bestyii.com/topic/169">搭建Rocky Linux8+Nginx+Php+Mysql+Redis 服务器</a> 这里通过 dnf 的方式安装了 php。<br>【8】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45476104/article/details/134912481">php 之 源码包编译安装</a><br>【9】.<a target="_blank" rel="noopener" href="https://www.php.net/manual/en/ref.pdo-mysql.php">MySQL Functions (PDO_MYSQL) ¶</a></p>
<p>【解决方案】<br>我虽然没有重新安装成功mysql的驱动，但是我重新编辑了php.ini文件，把其中的 mysql 相关的扩展打开了，重新启动了php，最后可以了。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extension=mysqli</span><br><span class="line">extension=pdo_mysql</span><br></pre></td></tr></tbody></table></figure>


<hr>
<p>(1) error: can not find mysql under the “/usr/bin/mysql” that you specified<br>我是先安装的php，可能在编译的时候，没有找到配置文件，不知道为什么不行</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/chenghuikai/article/details/45173943">LINUX下安装PHP，而不安装mysql</a><br>2.<a target="_blank" rel="noopener" href="https://blog.51cto.com/skypegnu1/1567869">关于编译PHP的一点思考</a><br>3.<a target="_blank" rel="noopener" href="https://blog.csdn.net/wd2014610/article/details/79659073">如何查看yum 安装的软件路径（不要再忘了）</a><br>4.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_29117805/article/details/113949692">mysql安装出现configure_安装MySQL报错：configure: error: Unable to find your mysql installation…</a></div>
<h1 id="11-问题"><a href="#11-问题" class="headerlink" title="11.问题"></a>11.问题</h1><h2 id="1-二级目录引发的404问题"><a href="#1-二级目录引发的404问题" class="headerlink" title="1.二级目录引发的404问题"></a>1.二级目录引发的404问题</h2><p>在一个目录下放置了html文件之后，可以进行访问，但是同目录下的php无法访问。</p>
<p>【尝试方法】<br>以为是因为php使用的不是root用户，但是nginx启动的时候使用的是root用户，所以无法访问，但是我修改了php的<a target="_blank" rel="noopener" href="http://www.conf配置,发现无法使用root启动php./">www.conf配置，发现无法使用root启动php。</a></p>
<p>【解决方法】<br>这个问题，主要就是因为在Nginx中配置了二级目录，不要二级目录可以暂时解决问题，但是我因为应用程序很多的地方都使用了这个二级目录，所以暂时改不了。</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/55793101">nginx访问php文件404</a><br>2.<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1174122">Nginx+PHP php文件404错误的一个可能原因</a> 修改50x错误页面的正确root地址,修改nginx的运行用户为www，重启nginx<br>3.<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012560213/article/details/80816103">centos 7: 使用systemctl，Root 身份运行php-fpm</a><br>4.<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000010836463">centos nginx+php 目录下的项目访问显示404</a> 这里使用了nginx也是不行的</div>
<h2 id="2-thinkphp引发的404"><a href="#2-thinkphp引发的404" class="headerlink" title="2.thinkphp引发的404"></a>2.thinkphp引发的404</h2><p>我解决了二级目录引发的404问题之后，出现了简单的php没有问题，但是thinkphp文件返回404的问题。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">'hello world'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>【尝试方法】<br>(1) nginx设置伪静态</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location / {</span><br><span class="line">    <span class="keyword">if</span> (!-e <span class="variable">$request_filename</span>){</span><br><span class="line">        rewrite  ^(.*)$  /index.php?s=<span class="variable">$1</span>  last;   <span class="built_in">break</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>(2) runtime目录设置读写权限</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 777 -R runtime</span><br></pre></td></tr></tbody></table></figure>

<p>不起作用</p>
<p>(3) 开启调试模式<br>在 application/config.php中的app_debug配置参数,改为ture，就能在页面中看到剧透的错误了，而不是直接404错误。</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭调试模式</span></span><br><span class="line"><span class="string">'app_debug'</span> =&gt;  <span class="literal">false</span>,</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://www.sunzhongwei.com/thinkphp-nginx-under-404-screening-and-solution">Thinkphp nginx 下 404 问题排查及解决</a> 这里是说没有权限<br>2.<a target="_blank" rel="noopener" href="https://www.yisu.com/zixun/8382.html">thinkphp部署服务器后出现404错误</a> 这提到了一个伪静态的问题，还有一个就是写权限的问题<br>3.<a target="_blank" rel="noopener" href="https://www.kancloud.cn/thinkphp/thinkphp5_quickstart/478274">7）调试模式</a></div>
<h2 id="3-模块不存在"><a href="#3-模块不存在" class="headerlink" title="3.模块不存在"></a>3.模块不存在</h2><p>但我开启了 debug 模式之后，看到的错误消息，就是模版不存在</p>
<p>【尝试方法】<br>(1) 修改 application/config.php 文件</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 指向自己的模块名</span></span><br><span class="line"><span class="string">'default_module'</span> =&gt; <span class="string">'Services'</span></span><br></pre></td></tr></tbody></table></figure>

<p>(2) 修改了模块名的大小写<br>本来我 application 文件夹下有一个Services文件(这在windows上是可行的)，我把它改了小写。</p>
<p>虽然模块不存在的问题，没有了，但是又出现了新的问题,也就是说这个问题还是没有解决</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4e72d8eaa823">TP5自动生成目录报错-模块不存在:index</a> 一直照着这个做，但是还是不行，说是没有自动生成的模版<br>2.<a target="_blank" rel="noopener" href="https://www.codeleading.com/article/15255416226/">服务器tp框架报错index.php 模块不存在问题</a><br>3.<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000021704287">thinkphp5.1提示模块不存在:index</a> 这里说是把目录名改成小写，<br>4.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37138818/article/details/90511886">TP5 控制器命名大小写问题</a></div>
<h2 id="4-ReflectionParameter-getClass-is-deprecated"><a href="#4-ReflectionParameter-getClass-is-deprecated" class="headerlink" title="4.ReflectionParameter::getClass() is deprecated"></a>4.ReflectionParameter::getClass() is deprecated</h2><p>这个问题是PHP 8.0导致的,我才想起来，原先人家写的php是在7.x下运行的，没办法，我只能回去了。</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://php.watch/versions/8.0/deprecated-reflectionparameter-methods">PHP 8.0: ReflectionParameter::getClass()), ::isArray(), and ::isCallable() methods deprecated</a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/szuaudi/article/details/77879834">ThinkPHP 解决模板文件大小写问题</a></div>
<h2 id="5-致命错误-Class-‘app-Common-Controller-BaseController’-not-found"><a href="#5-致命错误-Class-‘app-Common-Controller-BaseController’-not-found" class="headerlink" title="5.致命错误: Class ‘app\Common\Controller\BaseController’ not found"></a>5.致命错误: Class ‘app\Common\Controller\BaseController’ not found</h2><p>这个错误，在windows上是没有问题的，但是到了CentOS8上，就是一个大问题，我看了看，其实是有 /cloud/master/PhServer/DingDing/application/Common/controller/BaseController,只不过其中的controller变成了小写罢了，这个问题真是难透了。</p>
<p>【解决方法】<br>临时解决方法，就是把相关的大些路径改为小写路径，这就是编码不规范导致的问题啊。真是接手别人的程序就是不行啊。</p>
<h2 id="6-php-7-4-Array-and-string-offset-access-syntax-with-curly-braces-is-deprecated"><a href="#6-php-7-4-Array-and-string-offset-access-syntax-with-curly-braces-is-deprecated" class="headerlink" title="6.php 7.4 Array and string offset access syntax with curly braces is deprecated"></a>6.php 7.4 Array and string offset access syntax with curly braces is deprecated</h2><p>还是版本的问题，原先的版本是 PHP 7.2.9,现在我安装的是PHP 7.4.3，看来还是要降啊。</p>
<p>找不到7.2.9,先是找了一个7.3.33版本，尝试一下吧。这要注意到是配置的编写： configure: WARNING: unrecognized options: –with-freetype, –enable-gd, –with-jpeg, –with-libxml, –with-zip,也就是说PHP8.0的.\configuration配置,不适合7.3.33了。</p>
<div class="reference">参考文章：<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36025814/article/details/105119237">php 7.4 Array and string offset access syntax with curly braces is deprecated</a> 直接降级了PHP版本</div>
<h2 id="7-PDOException-“could-not-find-driver”"><a href="#7-PDOException-“could-not-find-driver”" class="headerlink" title="7.PDOException “could not find driver”"></a>7.PDOException “could not find driver”</h2><p>我要连接sql server数据库</p>
<p>(1) 安装pecl</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install php-pear    </span><br></pre></td></tr></tbody></table></figure>

<p>(2) 使用pecl安装<br>因为我的版本是7.3.33,不能用sqlsrv-5.9.0,只能降级</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pecl install sqlsrv-5.8.0</span><br><span class="line"></span><br><span class="line">pecl config-set php_ini /usr/local/php/etc/php.ini</span><br><span class="line">pecl config-set ext_dir /usr/local/php</span><br><span class="line">pecl config-set php_dir /usr/local/php</span><br><span class="line">pecl config-set php_bin /usr/local/php/bin</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>不起作用</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2852748/pdoexception-could-not-find-driver">PDOException “could not find driver”</a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42299610/article/details/103753291">php通过pdo连接sql server数据库</a><br>3.<a target="_blank" rel="noopener" href="https://github.com/Microsoft/msphpsql/releases/tag/v5.9.0">5.9.0 for PHP Driver for SQL Server</a> 微软官方驱动<br>4.<a target="_blank" rel="noopener" href="https://serverfault.com/questions/254017/how-to-install-pecl-on-a-linux-system">How to install PECL on a linux system</a><br>5.<a target="_blank" rel="noopener" href="https://blog.csdn.net/webysp/article/details/93618335">tp5安装 sql server 提示could not find driver</a><br>6.<a target="_blank" rel="noopener" href="https://phpartisan.cn/news/24.html">Laravel配置和使用SqlServer，以及解决链接sqlsrv出现could not find driver</a><br>8.<a target="_blank" rel="noopener" href="https://www.myfreax.com/install-the-php-extension-with-pecl/">pecl安装php扩展</a><br>9.<a target="_blank" rel="noopener" href="https://www.everdaniel.com/2019/04/18/setting-up-the-sqlsrv-extension-for-php-7-2-on-ubuntu-18-04-2-lts/?lang=en">Setting up the SQLSRV extension for PHP 7.2 on Ubuntu 18.04.2 LTS</a><br>10.<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fee58d93e8b1">pecl 更换对应php版本</a> pecl配置php路径</div>
<hr>
<p>【尝试操作】<br>下载包特别特别的慢，不知道为什么<br>(1) 手动下载 sqlserver的两个包,并进行解压</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://pecl.php.net/package/pdo_sqlsrv">pdo_sqlsrv</a></li>
<li><a target="_blank" rel="noopener" href="http://pecl.php.net/package/sqlsrv">sqlsrv</a></li>
</ul>
<p>(2) 执行phpize</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/php/bin/phpize</span><br></pre></td></tr></tbody></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PHP Api Version:         20180731</span><br><span class="line">Zend Module Api No:      20180731</span><br><span class="line">Zend Extension Api No:   320180731</span><br></pre></td></tr></tbody></table></figure>

<p>(3) 重新配置</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config</span><br></pre></td></tr></tbody></table></figure>

<p>(4) 安装</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></tbody></table></figure>


<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1455199">Linux下手动编译安装PHP扩展的例子分享</a> 这里就是手动下载安装PDO_MYSQL的例子<br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/ltstud/article/details/78476333">当使用phpize的时候出现Can’t find PHP headers in /usr/include/php The php-devel package is required for use o</a> 关于安装 PHP 扩展，以前总以为要重新编译 PHP，今天查阅大量资料发现原来可以像apache模块一样动态扩展。今天就以 oci8 举例。</div>
<p>【尝试方法】</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https://packages.microsoft.com/config/rhel/7/prod.repo &gt; /etc/yum.repos.d/mssqlrelease.repo</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/ltstud/article/details/78476333">当使用phpize的时候出现Can’t find PHP headers in /usr/include/php The php-devel package is required for use o</a><br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37398747/article/details/112673722">PHP7 安装sqlsrv、pdo_sqlsrv扩展 centos</a> 这篇文章绝了</div>
<h2 id="9-SQLSTATE-08001"><a href="#9-SQLSTATE-08001" class="headerlink" title="9.SQLSTATE[08001]"></a>9.SQLSTATE[08001]</h2><p>当我解决了上面的问题之后，进行程序运行，出现了这个问题：[Microsoft][ODBC Driver 17 for SQL Server]SSL Provider: [error:1425F102:SSL routines:ssl_choose_client_version:unsupported protocol]</p>
<p><strong>注意</strong><br><strong>因为我不断的重新安装openssl，不断的重复，修改连接，导致了我的 openssl 损坏了，系统多个库无法使用，我只能是重新安装了系统。所以轻易不要尝试修改系统依赖软件 openssl，否则后果很严重。</strong></p>
<p>【尝试方案】<br>(1) 我尝试了密钥使用 SHA1 进行签名,结果无效</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update-crypto-policies --<span class="built_in">set</span> LEGACY</span><br><span class="line"></span><br><span class="line"><span class="comment">## 后来远程登录不上了我只能重新设置了</span></span><br><span class="line">update-crypto-policies --<span class="built_in">set</span> default</span><br></pre></td></tr></tbody></table></figure>

<p>(2) 尝试查看 openssl 版本</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 openssl 版本，结果报错了，我就把 /etc/pki/tls/openssl.cnf 删除了</span></span><br><span class="line">openssl version</span><br><span class="line"><span class="comment"># 删除错误的配置，然后再次运行 openssl ，就会生成一个新的。</span></span><br><span class="line"><span class="built_in">rm</span> -rf /etc/pki/tls/openssl.cnf</span><br></pre></td></tr></tbody></table></figure>

<p>(3) 替换文件</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /etc/ssl/openssl.cnf /etc/ssl/openssl-bak.cnf</span><br></pre></td></tr></tbody></table></figure>

<p>（4）编辑 openssl.conf<br>编写  /etc/ssl/openssl.conf 文件,增加如下内容,不知道为什么，我新装的CentOS8.0没有这个文件，但是我没有这个文件，只有 /etc/pki/tls 里面有一个 openssl.cnf文件,于是我修改了这个温文件，注释掉了这个，openssl_conf = default_modules，然后添加了新的内容。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/pki/tls/openssl.cnf</span><br><span class="line"><span class="comment">## openssl_conf = default_modules</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 新添加的内容</span></span><br><span class="line">openssl_conf = default_conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件底部</span></span><br><span class="line">[default_conf]</span><br><span class="line">ssl_conf = ssl_sect</span><br><span class="line"></span><br><span class="line">[ssl_sect]</span><br><span class="line">system_default = system_default_sect</span><br><span class="line"></span><br><span class="line">[system_default_sect]</span><br><span class="line">MinProtocol = TLSv1</span><br><span class="line">CipherString = DEFAULT@SECLEVEL=1</span><br><span class="line"></span><br><span class="line">[openssl_init]</span><br><span class="line">providers = provider_sect</span><br></pre></td></tr></tbody></table></figure>

<p>不知道为什么，以前我可以用这个解决，但是现在好像不行了，用了RockyLinux安装的。</p>
<p>（5）安装openssl1.0.2u<br>因为卸载是卸载不了的，只能是 高版本和低版本共存。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># #查找当前安装的OpenSSL版本</span></span><br><span class="line"><span class="comment"># rpm -qa|grep ssl</span></span><br><span class="line"><span class="comment"># #指定对应版本进行卸载</span></span><br><span class="line"><span class="comment"># yum -y remove openssl-3.0.7-28.el9_4.x86_64</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以去该地址下载自己想要的版本的OpenSSl</span></span><br><span class="line">https://www.openssl.org/source/old/1.0.2/openssl-1.0.2u.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#解压</span></span><br><span class="line">tar -zxvf openssl-1.0.2u.tar.gz</span><br><span class="line"><span class="comment">#进入目录</span></span><br><span class="line"><span class="built_in">cd</span> openssl-1.0.2u/</span><br><span class="line"><span class="comment">#编译安装</span></span><br><span class="line">./config --prefix=/usr/local/ssl</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份</span></span><br><span class="line"><span class="built_in">mv</span> /usr/bin/openssl /usr/bin/openssl-bak</span><br><span class="line"><span class="built_in">mv</span> /usr/include/openssl /usr/include/openss-bak</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改软连接</span></span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/ssl/bin/openssl /usr/bin/openssl</span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/ssl/include/openssl /usr/include/openssl</span><br><span class="line"><span class="comment">#查看版本</span></span><br><span class="line">openssl version -a </span><br></pre></td></tr></tbody></table></figure>

<p>(6) 安装openssl-1.1.1k</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">dnf install perl</span><br><span class="line"><span class="comment"># 0.下载，解压</span></span><br><span class="line">https://www.openssl.org/source/openssl-1.1.1k.tar.gz</span><br><span class="line">tar -zxvf openssl-1.1.1k.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.备份</span></span><br><span class="line"><span class="built_in">mv</span> /usr/bin/openssl /usr/bin/openssl.bak</span><br><span class="line"><span class="built_in">mv</span> /usr/include/openssl /usr/include/openssl.bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.编译，安装</span></span><br><span class="line"><span class="built_in">cd</span> openssl-1.1.1k</span><br><span class="line">./config --prefix=/usr/local/openssl</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.链接</span></span><br><span class="line"><span class="built_in">ln</span> -sf /usr/local/openssl/bin/openssl /usr/bin/openssl</span><br><span class="line"><span class="built_in">ln</span> -sf /usr/local/openssl/include/openssl /usr/include/openssl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> “/usr/local/openssl/lib” &gt;&gt; /etc/ld.so.conf</span><br><span class="line">ldconfig -v</span><br><span class="line"></span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1</span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/openssl/lib/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.检查</span></span><br><span class="line">openssl version</span><br></pre></td></tr></tbody></table></figure>

<p>(6) 安装openssl openssl-3.0.7<br>安装版本 openssl-3.0.7 (RockyLinux默认是3.0.7) 和安装前面的基本一样，不同的就是增加了 下面的方法。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf openssl-3.0.7.tar.gz</span><br><span class="line"><span class="comment"># 版本3</span></span><br><span class="line"><span class="built_in">echo</span> “/usr/local/openssl/lib64” &gt;&gt; /etc/ld.so.conf</span><br><span class="line"><span class="comment"># 原先指向的是 ls -L</span></span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/openssl/lib64/libcrypto.so.3 /usr/lib64/libcrypto.so.3</span><br><span class="line"><span class="comment"># 原先指向的是 libcrypto.so.3.0.7</span></span><br><span class="line"><span class="built_in">ln</span> -sf /usr/local/openssl/lib64/libcrypto.so.3 /usr/lib64/libcrypto.so.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换之后，我的 ssh 立马就端开了，但是还是没有解决问题, /lib64/libcrypto.so.3: version `OPENSSL_3.0.1' not found (required by /lib64/libssl.so.3)</span></span><br><span class="line"><span class="built_in">cp</span> /cloud/soft/openssl-3.0.0/libcrypto.so.3 /usr/lib/libcrypto.so.3</span><br><span class="line"><span class="comment"># 还是有问题</span></span><br><span class="line">openssl version</span><br><span class="line"><span class="comment"># 解决方案</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/local/openssl/lib64</span><br><span class="line"><span class="comment"># 取消设置</span></span><br><span class="line"><span class="built_in">unset</span> LD_LIBRARY_PATH</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"export LD_LIBRARY_PATH=/usr/local/openssl/lib64"</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></tbody></table></figure>

<p>(7) 重新安装之后，结果还是报错了， undefined symbol: EVP_md2, version OPENSSL_3.0.0<br>这个问题我已经决定要放弃了，真是太浪费时间了，算了，也没有钱，反正系统也能正常的运行，就先这个样子吧。</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://github.com/microsoft/msphpsql/issues/1056">SQLSTATE[08001]: [Microsoft][ODBC Driver 17 for SQL Server]SSL Provider: [error:1425F102:SSL routines:ssl_choose_client_version:unsupported protocol]</a><br>【2】.<a target="_blank" rel="noopener" href="https://github.com/microsoft/msphpsql/issues/1023"> SSL routines:ssl_choose_client_version:unsupported protocol#1023 </a><br>【3】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xwgli/p/14713664.html">linux 下连接 sql server 数据库遇到了错误：error:1425F102:SSL routines:ssl_choose_client_version:unsupported protocol</a> 这里也是编辑了openssl.cnf文件<br>【4】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/hjxdreamer/article/details/103296944">linux 使用openssl报找不到/usr/lib/ssl/openssl.cnf的解决办法</a><br>【5】.<a target="_blank" rel="noopener" href="https://github.com/microsoft/msphpsql/issues/1462">SQLSTATE[08001]: [Microsoft][ODBC Driver 18 for SQL Server]SSL Provider: [error:0A000102:SSL routines::unsupported protocol] </a> 这里也是在 Linux 上openssl.cnf通常是，/etc/ssl，在顶部openssl.cnf添加，底部添加<br>【6】.<a target="_blank" rel="noopener" href="https://www.walimao.com/archives/200.html">Rocky Linux 9 laravel 10(PHP8.3)连接SQL Server 数据库解决openssl 3.0.11 问题无法连接 </a> 执行下面命令，密钥使用 SHA1 进行签名<br>update-crypto-policies –set LEGACY<br>【7】.<a target="_blank" rel="noopener" href="https://docs.redhat.com/zh_hans/documentation/red_hat_enterprise_linux/8/html/system_design_guide/changing-the-system-wide-cryptographic-policy_using-the-system-wide-cryptographic-policies">6.2. 更改系统范围的加密策略</a> update-crypto-policies –show<br>【8】.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/77641240/getting-docker-compose-typeerror-kwargs-from-env-got-an-unexpected-keyword-ar">Getting docker-compose TypeError: kwargs_from_env() got an unexpected keyword argument ‘ssl_version’ in GitLab</a><br>【9】.<a target="_blank" rel="noopener" href="https://osfipin.com/article/19890628">PHP连接SQLSERVER出现SSL certificate报错</a> 这里从代码的层面修改了问题。区别就是，18的encrypt默认配置改为1了，而17默认配置为0，所以在连接的时候，需要手动设置连接参数，这样就不会出现：SSL routines:tls_process_server_certificate:certificate verify failed:self signed certificate。这样的报错了。<br>【10】.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/57265913/error-tcp-provider-error-code-0x2746-during-the-sql-setup-in-linux-through-te">Error: TCP Provider: Error code 0x2746. During the Sql setup in linux through terminal</a> 1.查看 openssl version。2.配置openssl。3.降级 openssl。4.downgrade Microsoft ODBC Driver 18 to 17。<br>【11】.<a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1412421/openssl-install-broken-after-dist-upgrade">Openssl install broken after dist upgrade</a><br>【12】.<a target="_blank" rel="noopener" href="https://diuut.com/?p=1439">卸载安装替换为指定版本OpenSSL</a> 这里卸载了 openssl-1.1.1g，安装了 1.0.2 版本<br>【13】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Magiclala/p/18374540">在CentOS7.9上 编译安装openssl-3.3.1+编译安装Nginx1.26.2</a> 我们应该遵循的第一个原则就是：让新的openssl版本和老的openssl版本共存。我们应该采取以下策略来实现:1.使用独立的安装目录。2.修改应用程序的路径。3.使用符号链接。4.编译时指定 OpenSSL 路径。<br>【14】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/flyfish1986/article/details/131475185">openssl版本升级与降级</a> 1.1.1升级3.1.1；3.1.1降级 1.1.1。<br>【15】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/whatday/article/details/123841796">centos7 yum 安装 openssl 1.1.1k</a> 最后一步 ln 建立符号链接 是为了让 python3.10 在 configure 时能找到 openssl 1.1.1<br>【16】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/niaooer/article/details/130492697">CentOS7.9下升级OpenSSL到OpenSSL 1.1.1k</a><br>【17】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/eagle6688/p/17471170.html">Rocky Linux 安装 OpenSSL 1.1.1</a> ，Rocky Linux 9.1自带的Open SSL是3.0.7版本(如下图)，但是有些程序依然依赖Open SSL 1.1.x版本，这就要求我们需要掌握在同一个主机下同时安装两个不同版本的OpenSSL方法。<br>【18】.<a target="_blank" rel="noopener" href="https://github.com/openssl/openssl/issues/13761">OpenSSL 1.1.i and “Can’t locate FindBin.pm in @INC”</a> 这里有讨论的出现问题：Can’t locate FindBin.pm，就是安装 perl。dnf install perl<br>【19】.[执行“openssl version“报openssl: /usr/lib/libcrypto.so.3: version `OPENSSL_3.1.0‘ not found (required by](<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41765969/article/details/127565952">https://blog.csdn.net/qq_41765969/article/details/127565952</a>) 执行“sudo cp /home/zyf/sourceOpen/openssl/libcrypto.so.3 /usr/lib/libcrypto.so.3”之后，<br>【20】.<a target="_blank" rel="noopener" href="https://discussion.fedoraproject.org/t/lib64-libldap-so-2-undefined-symbol-evp-md2-version-openssl-3-0-0-after-upgrading-from-f35-to-f37/91322">/lib64/libldap.so.2: undefined symbol: EVP_md2, version OPENSSL_3.0.0 after upgrading from F35 to F37</a> export LD_LIBRARY_PATH=/opt/openssl-1.1.1d/lib${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}<br>【21】.<a target="_blank" rel="noopener" href="https://forums.rockylinux.org/t/compiling-openssl-3-0-8-on-rocky-linux-9/8936">Compiling Openssl 3.0.8 on Rocky Linux 9</a> 这里给我说的问题一样，“我需要运行一个需要这个新版本的应用程序”：在这种情况下，我建议编译新版本，但不要安装它（并破坏系统）。相反，将新的库文件收集到某处的本地文件夹中，并使用导出 LD_LIBRARY_PATH 环境变量使您的应用程序使用该文件夹作为库。或者，研究 docker/podman 并可能在隔离的容器中运行您的应用程序。<br>【22】.<a target="_blank" rel="noopener" href="https://www.rockylinux.cn/notes/rocky-linux-9-openssh-cve-2024-6387-vulnerability-quick-fix.html">Rocky Linux 9 &amp; RedHat 系 OpenSSH CVE-2024-6387 漏洞快速修复</a></div>
<h2 id="10-windows和linux下的大小写问题，导致无法运行的问题"><a href="#10-windows和linux下的大小写问题，导致无法运行的问题" class="headerlink" title="10.windows和linux下的大小写问题，导致无法运行的问题"></a>10.windows和linux下的大小写问题，导致无法运行的问题</h2><p>因为我拿到的是别人写的php程序，在windows上运行的好好的，我要移植到linux上，我遇到了这样的问题</p>
<p>定义了名字空间，对应于磁盘上的 application\Common\controller 文件夹</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">Common</span>\<span class="title class_">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">Common</span>\<span class="title">Controller</span>\<span class="title">BaseController</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>这样写，在windows上运行没有问题，但是到了linux上，就会出现严重错误，导致程序找不到模块，无法运行，必须改为和磁盘上的大小写一致，改成 Common\controller 才可以。这个我真的非常的蛋疼，要改很多的东西，最后至于原因是什么，我暂时还没有深究，是在是忙不过来了。我已经通宵改了这些代码了。</p>
<h2 id="11-count-Parameter-must-be-an-array-or-an-object-that-implements-Countable"><a href="#11-count-Parameter-must-be-an-array-or-an-object-that-implements-Countable" class="headerlink" title="11.count(): Parameter must be an array or an object that implements Countable"></a>11.count(): Parameter must be an array or an object that implements Countable</h2><p>这个也是版本的问题吗？我真是醉了，我降级到了原先代码所在的php版本，还是不行，7.2.9。</p>
<p>【解决方法】<br>直接修改代码好了</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源代码</span></span><br><span class="line"><span class="title function_ invoke__">count</span>(<span class="variable">$variable</span>)</span><br><span class="line"><span class="comment">// 改为</span></span><br><span class="line"><span class="title function_ invoke__">count</span>(<span class="keyword">array</span>(<span class="variable">$variable</span>));</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://wordpress.org/support/topic/count-parameter-must-be-an-array-or-an-object-that-implements-countable-6/">count(): Parameter must be an array or an object that implements Countable</a><br>2.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/53020833/count-parameter-must-be-an-array-or-an-object-that-implements-countable-in-lar">count() parameter must be an array or an object that implements countable in laravel</a></div>
<h2 id="12-undefined-symbol-zval-ptr-dtor"><a href="#12-undefined-symbol-zval-ptr-dtor" class="headerlink" title="12.undefined symbol: zval_ptr_dtor"></a>12.undefined symbol: zval_ptr_dtor</h2><p>这是在PHP7.2.29编译的时候使用的sqlsrv5.8.1时出现的问题，我已经重新编译安装了多次了，还是无法启动这个扩展,我以为是编译参数的问题， 我专门找了一个 PHP 7.2 的编译参数，也还是不行。</p>
<p>【解决方法】<br>最后是将sqlsrv 和 pdo_sqlsrv 也降级到了 5.8.0</p>
<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://github.com/Microsoft/msphpsql/issues/772">PHP 7.2 Unable to load dynamic library - undefined symbol: call_user_function</a><br>2.<a target="_blank" rel="noopener" href="https://mlog.club/article/2192448">由于出现“ zval_ptr_dtor”错误而无法加载SQLsrv </a><br>3.<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1802886">Linux下源码安装PHP 卸载PHP</a><br>4.<a target="_blank" rel="noopener" href="https://github.com/microsoft/msphpsql/issues/1255"> Unable to load dynamic library ‘pdo_sqlsrv.so’/‘sqlsrv.so’ - No such file or directory - Debian 10.9 #1255 </a> 这里我也不知道到底是怎么解决的问题</div>
<h2 id="13-configure-error-Cannot-find-ldap-h"><a href="#13-configure-error-Cannot-find-ldap-h" class="headerlink" title="13.configure: error: Cannot find ldap.h"></a>13.configure: error: Cannot find ldap.h</h2><p>如何配置的时候增加了：–with-ldap=shared –with-ldap-sasl  参数，则可能需要安装ldap这个插件。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装openldap</span></span><br><span class="line">yum install openldap openldap-devel  -y</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>1.<a target="_blank" rel="noopener" href="https://blog.51cto.com/327101303/1618276">configure: error: Cannot find ldap.h</a> 两个问题，一并解决了</div>
<h2 id="14-Package-‘krb5-gssapi’-required-by-‘virtual-world’-not-found"><a href="#14-Package-‘krb5-gssapi’-required-by-‘virtual-world’-not-found" class="headerlink" title="14.Package ‘krb5-gssapi’, required by ‘virtual:world’, not found"></a>14.Package ‘krb5-gssapi’, required by ‘virtual:world’, not found</h2><p>编译安装的时候，出现了这个问题：Consider adjusting the PKG_CONFIG_PATH environment variable if you installed software in a non-standard prefix.</p>
<p>【尝试解决】<br>(1) 安装 cmake3，没有效果。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install cmake3; </span><br></pre></td></tr></tbody></table></figure>

<p>(2) 安装 gssapi，没有这个 libkrb5-dev 模块，gassapi 也安装失败。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install libkrb5-dev</span><br><span class="line"></span><br><span class="line">pip3 install gassapi</span><br></pre></td></tr></tbody></table></figure>

<p>【解决方案】<br>安装 krb5 模块</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install krb5-workstation krb5-devel krb5-libs mod_auth_gssapi</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://forum.directadmin.com/threads/php-7-4-installation-error.59617/">PHP 7.4 installation error</a><br>【2】.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/30896343/how-to-install-gssapi-python-module">How to install GSSAPI Python module?</a> pip install gssapi<br>【3】.<a target="_blank" rel="noopener" href="https://books.clusterapps.com/books/command-line/page/centos-7-gssapi-module">CentOS 7 GSSAPI module</a> 安装了 krb5 模块</div>
<h2 id="15-Package-‘libzip’-required-by-‘virtual-world’-not-found"><a href="#15-Package-‘libzip’-required-by-‘virtual-world’-not-found" class="headerlink" title="15.Package ‘libzip’, required by ‘virtual:world’, not found"></a>15.Package ‘libzip’, required by ‘virtual:world’, not found</h2><p>编译 php8.3 的时候，出现了这个问题。</p>
<p>【解决方案】</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install libzip libzip-devel</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://forum.directadmin.com/threads/solved-centos-7-error-build-php-7-4-8-1.66776/">SOLVED Centos 7: Error build PHP 7.4 &amp; 8.1</a></div>
<h2 id="16-undefined-reference-to-EVP-PKEY-size’"><a href="#16-undefined-reference-to-EVP-PKEY-size’" class="headerlink" title="16.undefined reference to `EVP_PKEY_size’"></a>16.undefined reference to `EVP_PKEY_size’</h2><p>Rocky Linux 9.0  编译 8.3.13 的时候，出现了问题，[Makefile:308: sapi/cli/php] Error 1，上面的一条错误是：undefined reference to `EVP_PKEY_size’</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/cloud/soft/php-8.3.13/ext/openssl/xp_ssl.c:460: undefined reference to `sk_num<span class="string">'</span></span><br><span class="line"><span class="string">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/openssl/xp_ssl.c:476: undefined reference to `sk_value'</span></span><br><span class="line">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/openssl/xp_ssl.c:518: undefined reference to `sk_pop_free<span class="string">'</span></span><br><span class="line"><span class="string">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/openssl/xp_ssl.c:527: undefined reference to `sk_pop_free'</span></span><br><span class="line">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/openssl/xp_ssl.c:494: undefined reference to `sk_pop_free<span class="string">'</span></span><br><span class="line"><span class="string">/usr/bin/ld: ext/phar/util.o: in function `phar_verify_signature'</span>:</span><br><span class="line">/cloud/soft/php-8.3.13/ext/phar/util.c:1587: undefined reference to `EVP_MD_CTX_create<span class="string">'</span></span><br><span class="line"><span class="string">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/phar/util.c:1622: undefined reference to `EVP_MD_CTX_destroy'</span></span><br><span class="line">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/phar/util.c:1632: undefined reference to `EVP_MD_CTX_destroy<span class="string">'</span></span><br><span class="line"><span class="string">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/phar/util.c:1590: undefined reference to `EVP_MD_CTX_destroy'</span></span><br><span class="line">/usr/bin/ld: ext/phar/util.o: <span class="keyword">in</span> <span class="keyword">function</span> `phar_create_signature<span class="string">':</span></span><br><span class="line"><span class="string">/cloud/soft/php-8.3.13/ext/phar/util.c:1892: undefined reference to `EVP_MD_CTX_create'</span></span><br><span class="line">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/phar/util.c:1901: undefined reference to `EVP_PKEY_size<span class="string">'</span></span><br><span class="line"><span class="string">/usr/bin/ld: /cloud/soft/php-8.3.13/ext/phar/util.c:1935: undefined reference to `EVP_MD_CTX_destroy'</span></span><br><span class="line">/usr/bin/ld: ext/mysqlnd/mysqlnd_auth.o: <span class="keyword">in</span> <span class="keyword">function</span> `mysqlnd_caching_sha2_public_encrypt<span class="string">':</span></span><br><span class="line"><span class="string">/cloud/soft/php-8.3.13/ext/mysqlnd/mysqlnd_auth.c:1012: undefined reference to `EVP_PKEY_size'</span></span><br><span class="line">/usr/bin/ld: ext/mysqlnd/mysqlnd_auth.o: <span class="keyword">in</span> <span class="keyword">function</span> `mysqlnd_sha256_public_encrypt<span class="string">':</span></span><br><span class="line"><span class="string">/cloud/soft/php-8.3.13/ext/mysqlnd/mysqlnd_auth.c:705: undefined reference to `EVP_PKEY_size'</span></span><br><span class="line">collect2: error: ld returned 1 <span class="built_in">exit</span> status</span><br><span class="line">make: *** [Makefile:308: sapi/cli/php] Error 1</span><br></pre></td></tr></tbody></table></figure>

<p>【问题说明】<br>这个问题主要是因为我重新从 openssl 3.0.8 降级到了 openssl 1.0.2，重新编译了 php 8.3.13，出现了这个问题，我准备把 php 降低到 7.2.x 版本。</p>
<p>【解决方案】<br>最后我也没有解决这个问题，因为我不断的重新安装openssl，不断的重复，修改连接，导致了我的 openssl 损坏了，系统多个库无法使用，我只能是重新安装了系统。</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33521184/article/details/123112824">Make编译安装php出现collect2: ld returned 1 exit status make: *** [sapi/cli/php] Error 1的解决方法</a> 「undefined reference to libiconv_open’」之类的错误信息<br>【2】.<a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/440640">安装PHP出现make: *** [sapi/cli/php] Error 1 解决办法</a> 编辑Makefile 大约77 行左右的地方: EXTRA_LIBS = ….. -lcrypt 在最后加上 -liconv，例如: EXTRA_LIBS = ….. -lcrypt -liconv 然后重新再次 make 即可。<br>【3】.<a target="_blank" rel="noopener" href="https://github.com/jeroen/openssl/issues/26">undefined symbol: EVP_PKEY_sign</a><br>【4】.<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/openssl.requirements.php">强烈建议使用维护的 OpenSSL 版本，否则 web 服务器很容易受到攻击。 </a><br>【5】.<a target="_blank" rel="noopener" href="https://github.com/aws/aws-sdk-cpp/issues/2622">Build failed on RHEL9 with OpenSSL 3</a><br>【6】.<a target="_blank" rel="noopener" href="https://www.ziruchu.com/art/540">使用 phpipze 编译扩展报错的解决方法</a> 这里遇到的问题和我的一模一样，我尝试了先去掉 –with-openssl，安装完成。安装完成后，我再通过 phpize 编译时，一切正常，当在 php.ini 文件中加上 openssl.so 时，就会报错，这个问题未能解决，如果你知道的话，不妨请赐教，谢谢！<br>【7】.<a target="_blank" rel="noopener" href="https://blog.51cto.com/frankch/1746232"> 编译安装 PHP 7.0.3 亲测全攻略 &amp; 以及如何单独的安装某个模块</a> 需要进行操作make clean清除之前编译安装的中间文件<br>【8】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/parenth/p/11362946.html">自己从源码编译一个新的openssl</a> 编译php_openssl，链接新的openssl<br>【9】.[openssl编程编译错误undefined reference to `SSL_get1_peer_certificate‘解决方法](<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_41928334/article/details/124796389">https://blog.csdn.net/sinat_41928334/article/details/124796389</a>)<br>【10】.<a target="_blank" rel="noopener" href="https://www.linuxquestions.org/questions/slackware-14/slackware-14-1-openssl-1-1-1-a-4175686741/">[SOLVED] Slackware 14.1 - OpenSSL-1.1.1 </a> 我找到了解决方案。旧的 evp.h 不包含这些函数，但新的包含。使用新版本的 openssl（截至目前为 3.3，是来自 git 的最新版本）构建二进制文件的临时解决方案是将整个 /include/openssl/* 复制到 /usr/include/openssl 但不是在创建之前复制整个原始目录的备份，以防其他内容损坏。或者在构建您想要的任何内容后，只需将原始文件夹复制回来即可。这样你就可以使用最新的 openssl 来构建你拥有的任何软件，但实际上不会破坏任何东西</div>
<h2 id="17-ImportError-lib64-libldap-so-2-undefined-symbol-EVP-md2-version-OPENSSL-3-0-0"><a href="#17-ImportError-lib64-libldap-so-2-undefined-symbol-EVP-md2-version-OPENSSL-3-0-0" class="headerlink" title="17.ImportError: /lib64/libldap.so.2: undefined symbol: EVP_md2, version OPENSSL_3.0.0"></a>17.ImportError: /lib64/libldap.so.2: undefined symbol: EVP_md2, version OPENSSL_3.0.0</h2><p>一直弄 openssl ，结果导致系统的 openssl 不能用了。</p>
<p>【尝试方案】<br>（1）我从 3.0.0 安装到 3.0.14，后来又降到 3.0.7，结果还是一样的错误。<br>（2）重启系统，结果也还是有问题。</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://forums.rockylinux.org/t/remediating-openssl-3-0-7-vulnerability/12872">Remediating openssl 3.0.7 vulnerability</a><br>【2】.<a target="_blank" rel="noopener" href="https://github.com/openssl/openssl/issues/11856">openssl: symbol lookup error: openssl: undefined symbol: EVP_mdc2, version OPENSSL_1_1_0</a> 重新启动后已修复，但是存在另一个问题</div></body></html>
              </div>
            </div>
          </div>
          <div class='post-footer'>
            <div>**本文已结束，感谢您的观看**</div>
            <div class="btn btn-pay">鼓励一下</div>
          </div>
          
            <div class="page">
              
              <section class="past-wrap">
                <section class="past">
                <p>往期推荐</p>
                </section>
              </section>
              <div class="post-nav">
                <div class="post-nav-next post-nav-item">
                  
                    <a href="/posts/dcefec32.html" rel="next" title="Linux系统倒腾笔记三">
                      <i class="iconfont icon-prev"></i> Linux系统倒腾笔记三
                    </a>
                  
                </div>

                <span class="post-nav-divider"></span>

                <div class="post-nav-prev post-nav-item">
                  
                    <a href="/posts/d8713bf3.html" rel="prev" title="Linux安装DockerPHP">
                      Linux安装DockerPHP <i class="iconfont icon-next"></i>
                    </a>
                  
                </div>
              </div>
            </div>
          
          
 <div class="comments" id="comments">
    <div id="disqus_thread">
        <noscript>
            不支持Javascript,那你还上啥网啊。
            <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript"></a>
        </noscript>
    </div>
</div>

      </div>
    </div>


    <div class="layui-col-md2 layui-col-lg2 layui-col-sm10 layui-col-xs12 catalogue-wrap">
        

<div class="catalogue-content">
    <div class="title">文章目录</div>
    <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">1.前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">2.</span> <span class="toc-text">2.安装依赖</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%B8%8B%E8%BD%BD"><span class="toc-number">3.</span> <span class="toc-text">3.下载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4.配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%AE%89%E8%A3%85"><span class="toc-number">5.</span> <span class="toc-text">5.安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">6.生成配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%90%AF%E5%8A%A8"><span class="toc-number">7.</span> <span class="toc-text">7.启动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-nginx%E9%85%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">8.nginx配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-SQLServer%E9%A9%B1%E5%8A%A8"><span class="toc-number">9.</span> <span class="toc-text">9.SQLServer驱动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-MySQL%E9%A9%B1%E5%8A%A8"><span class="toc-number">10.</span> <span class="toc-text">10.MySQL驱动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E9%97%AE%E9%A2%98"><span class="toc-number">11.</span> <span class="toc-text">11.问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BA%8C%E7%BA%A7%E7%9B%AE%E5%BD%95%E5%BC%95%E5%8F%91%E7%9A%84404%E9%97%AE%E9%A2%98"><span class="toc-number">11.1.</span> <span class="toc-text">1.二级目录引发的404问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-thinkphp%E5%BC%95%E5%8F%91%E7%9A%84404"><span class="toc-number">11.2.</span> <span class="toc-text">2.thinkphp引发的404</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%A8%A1%E5%9D%97%E4%B8%8D%E5%AD%98%E5%9C%A8"><span class="toc-number">11.3.</span> <span class="toc-text">3.模块不存在</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ReflectionParameter-getClass-is-deprecated"><span class="toc-number">11.4.</span> <span class="toc-text">4.ReflectionParameter::getClass() is deprecated</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%87%B4%E5%91%BD%E9%94%99%E8%AF%AF-Class-%E2%80%98app-Common-Controller-BaseController%E2%80%99-not-found"><span class="toc-number">11.5.</span> <span class="toc-text">5.致命错误: Class ‘app\Common\Controller\BaseController’ not found</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-php-7-4-Array-and-string-offset-access-syntax-with-curly-braces-is-deprecated"><span class="toc-number">11.6.</span> <span class="toc-text">6.php 7.4 Array and string offset access syntax with curly braces is deprecated</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-PDOException-%E2%80%9Ccould-not-find-driver%E2%80%9D"><span class="toc-number">11.7.</span> <span class="toc-text">7.PDOException “could not find driver”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-SQLSTATE-08001"><span class="toc-number">11.8.</span> <span class="toc-text">9.SQLSTATE[08001]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-windows%E5%92%8Clinux%E4%B8%8B%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E9%97%AE%E9%A2%98%EF%BC%8C%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">11.9.</span> <span class="toc-text">10.windows和linux下的大小写问题，导致无法运行的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-count-Parameter-must-be-an-array-or-an-object-that-implements-Countable"><span class="toc-number">11.10.</span> <span class="toc-text">11.count(): Parameter must be an array or an object that implements Countable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-undefined-symbol-zval-ptr-dtor"><span class="toc-number">11.11.</span> <span class="toc-text">12.undefined symbol: zval_ptr_dtor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-configure-error-Cannot-find-ldap-h"><span class="toc-number">11.12.</span> <span class="toc-text">13.configure: error: Cannot find ldap.h</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-Package-%E2%80%98krb5-gssapi%E2%80%99-required-by-%E2%80%98virtual-world%E2%80%99-not-found"><span class="toc-number">11.13.</span> <span class="toc-text">14.Package ‘krb5-gssapi’, required by ‘virtual:world’, not found</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-Package-%E2%80%98libzip%E2%80%99-required-by-%E2%80%98virtual-world%E2%80%99-not-found"><span class="toc-number">11.14.</span> <span class="toc-text">15.Package ‘libzip’, required by ‘virtual:world’, not found</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-undefined-reference-to-EVP-PKEY-size%E2%80%99"><span class="toc-number">11.15.</span> <span class="toc-text">16.undefined reference to &#96;EVP_PKEY_size’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-ImportError-lib64-libldap-so-2-undefined-symbol-EVP-md2-version-OPENSSL-3-0-0"><span class="toc-number">11.16.</span> <span class="toc-text">17.ImportError: &#x2F;lib64&#x2F;libldap.so.2: undefined symbol: EVP_md2, version OPENSSL_3.0.0</span></a></li></ol></li></ol>
    </div>
</div>


        <div class="sidecontent">

    

    <div class="side-panel side-sponsor">
        <div class="side-title one">小额赞助</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">本人提供免费与付费咨询服务，感谢您的支持！赞助请发邮件通知，方便公布您的善意！</div>
                <div class="content">
                    <img src="/images/pay.png" title="小额赞助"/>
                </div>
                
                
                <div class="donor_content">
                    
                        
                        <div class="donor-item">
                            <span class="name">**光</span>
                            <span class="money">3.01 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">Sun</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">bibichuan</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                    <div class="donor_footer">
                        <span>捐赠者名单</span>
                        <span class="total">合计：9.01 元</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title two">微信公众号</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <img src="/images/wechat.png" title="公众号"/>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title one">广告位</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">诚心邀请广大金主爸爸洽谈合作</div>
                <div class="detail">
                </div>
            </div>
        </div>
    </div>

    <div class="side-ask side-panel">
        
        <div class="side-title two">每日一省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">isNaN 和 Number.isNaN 函数的区别？</div>
                <div class="detail">
                    
                        <p>1.函数 isNaN 接收参数后，会尝试将这个参数转换为数值，任何不能被转换为数值的的值都会返回 true，因此非数字值传入也会返回 true ，会影响 NaN 的判断。</p>
                    
                        <p>2.函数 Number.isNaN 会首先判断传入参数是否为数字，如果是数字再继续判断是否为 NaN ，不会进行数据类型的转换，这种方法对于 NaN 的判断更为准确。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日二省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">为什么0.1+0.2 ! == 0.3，如何让其相等?</div>
                <div class="detail">
                     
                        <p>一个直接的解决方法就是设置一个误差范围，通常称为“机器精度”。对JavaScript来说，这个值通常为2-52，在ES6中，提供了Number.EPSILON属性，而它的值就是2-52，只要判断0.1+0.2-0.3是否小于Number.EPSILON，如果小于，就可以判断为0.1+0.2 ===0.3。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-8"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日三省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">== 操作符的强制类型转换规则？</div>
                <div class="detail">
                     
                        <p>1.首先会判断两者类型是否**相同，**相同的话就比较两者的大小。</p>
                    
                        <p>2.类型不相同的话，就会进行类型转换。</p>
                    
                        <p>3.会先判断是否在对比 null 和 undefined，是的话就会返回 true。</p>
                    
                        <p>4.判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number。</p>
                    
                        <p>5.判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断。</p>
                    
                        <p>6.判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-12"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title two">每日英语</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">Happiness is time precipitation, smile is the lonely sad.</div>
                <div class="detail">幸福是年华的沉淀，微笑是寂寞的悲伤。</div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2016</span>
                
                    <span class="side-footer-item side-button down" title="查看翻译">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                <span class="side-footer-item author">——— 美文</span>
            </div>
        </div>
    </div>

</div>
    </div>

  </div>
  <div class="side-tool">
    <div class="side-icon-wrap">
        <i class="iconfont icon-sidemenu"></i>
    </div>
    <ul class="side-tool-content">
        <li title="回到顶部" class="back-to-top side-tool-item">
            <a class="function-button"><i class="iconfont icon-backtop"></i></a>
        </li> 
        <li title="分享文章" class="side-share side-tool-item">
            <a class="function-button"><i class="iconfont icon-share"></i></a>
            <div class="iShare iShare-content"></div>
        </li>
        <li title="喜欢文章" class="side-like side-tool-item">
            <a class="function-button"><i class="iconfont icon-like"></i></a>
        </li>
         <li class="side-close" title="关闭侧边栏">
            <a class="function-button"><i class="iconfont icon-close"></i></a>
        </li>
    </ul>
</div>

      </div>
    </main>   
    
    <footer id="footer" class="footer layui-fluid">
      <div class="layui-row">
        <div class="container footer-inner">
          <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="footer-col">
  <div>温馨提示</div>
  <div><a href="/about" target="_self">关于作者</a></div>
  <div><a href="/archives">博客归档</a></div>
  <div>
    <span id="busuanzi_container_site_uv">
      访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
  </div>
</div>
<div class="footer-col">
  <div>友情链接</div>
  
  
  
  
    
        <div><a href="https://malagis.com" target="_blank">麻辣GIS</a></div>
    
  
    
        <div><a href="https://www.giserdqy.com" target="_blank">GIS开发者</a></div>
    
  
    
        <div><a href="https://earth.nullschool.net/zh-cn/" target="_blank">earth.nullschool</a></div>
    
  
    
        <div><a href="https://www.gisclouder.com/" target="_blank">码上GIS实现的热力图</a></div>
    
  
    
        <div><a href="http://www.cnblogs.com/naaoveGIS/" target="_blank">李晓辉的博客园</a></div>
    
  
    
        
          <div><a href="/links">更多</a></div>
          
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
  <div class="chain-msg">**注意：以上网站都没给钱**</div>
</div>
<div class="footer-col">
  <div>精彩推荐</div>
  
    <div><a href="/study">励志</a></div>
  
    <div><a href="/anime">动漫</a></div>
  
    <div><a href="/movie">电影</a></div>
  
    <div><a href="/tv">电视</a></div>
  
    <div><a href="/book">书籍</a></div>
  
</div>
<div class="footer-col">
  <div>开源项目</div>
  
    <div><a href="/"></a></div>
  
</div>
          
        </div>
      </div>
    </footer>

    


<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>

    
        
            
            
            <script type="text/javascript" src="/lib/layui/layui.js"></script>
        
    
        
    

    
        
            
            
                
            
            <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
        
    

    
        
            
            
            <script type="text/javascript" src="/lib/jquery.actual.min.js"></script>
        
    


    


  <script type="text/javascript" src="/js/src/utils.js?v="></script>



    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
<script type="text/javascript">
  var client = algoliasearch('DM9LMZOGZE', '1c2739694b8acb4c4edab8ccb098d166');
  var index = client.initIndex('bibichuan');
  $(document).ready(function(){
    var $search=$(".header-wrap");
    var $searchbtn= $search.find(".find");
    var $ipt=$search.find(".search-ipt");
    var $resultClear=$search.find(".clear");
    var $result=$search.find(".result");
    // 加入layui
    layui.use('layer', function(){
      var layer = layui.layer;
      // 搜索按钮点击
      $searchbtn.on("click",function(){
        var text=$ipt.val();
        var $this=$(this);
        var $resultContent=$result.find(".result-content");
        if(text){
          var loadDialog=layer.load();
          if(!$this.hasClass("disabled")){
            $this.addClass("disabled");
            index.search(text, (err, { hits } = {}) => {
              layer.close(loadDialog); 

              $this.removeClass("disabled");
              var resultHtml="";
              // 命中
              if(hits.length>0){
                var count=hits.length;
                for(var i=0;i<count;i++){
                  var h=hits[i];
                  //根据返回值中_highlightResult来判断显示的内容。
                  var content=h.contentStripTruncate;
                  var _highlight=h._highlightResult;

                  var resultC="";
                  var hitType=""; // 命中的类型
                  //标题命中
                  if(_highlight.title&&!resultC){  
                    if(_highlight.title.matchLevel&&_highlight.title.matchLevel!='none'){
                      resultC=_highlight.title.value;
                      hitType="title";
                    }
                  }
                  //分类命中
                  if(_highlight.categories&&!resultC){ 
                    var arr=_highlight.categories;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="categories";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="categories";
                      }
                    }
                  }

                  //标签命中
                  if(_highlight.tags&&!resultC){ 
                    var arr=_highlight.tags;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="tags";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="tags";
                      }
                    }
                  }

                  // 内容命中
                  if(!resultC){ 
                    resultC=_highlight.contentStripTruncate.value;
                    hitType="contentStripTruncate";
                  }

                  //如果内容过长，则截断
                  if(resultC.length>50){
                    var index=resultC.indexOf('<em>');
                    var blockIndex=10;
                    if(index>=blockIndex){
                      index=index-blockIndex;
                    }else{
                      index=0;
                    }
                    resultC="..."+resultC.substring(index,index+20+blockIndex)+"...";
                  }
                  switch(hitType){
                    case "title":
                      resultC="标题："+resultC;
                      break;
                    case "categories":
                      resultC="分类："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "tags":
                      resultC="标签："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "contentStripTruncate":
                      resultC="内容："+resultC;
                      break;
                  }

                  resultHtml+='<li class="result-item" title="'+content+'"><a href="'+h.permalink+'">'+resultC+'</a></li>';
                }
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }else{
                var resultHtml='<li class="result-item" title="未找到相关内容"><a>未找到相关内容</a></li>';
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }
            });
          }
        }else{
          layer.msg("请输入搜索内容");
        }
      });
      // 删除输入内容
      $resultClear.on("click",function(){
        $result.hide();
        $resultClear.hide();
        //清空输入内容
        $ipt.val("");
      });
      // 监听确定事件
      $ipt.keydown(function(e){
        if(e.keyCode==13){
          $searchbtn.click();
        }
      });
    });              
  
  });
</script>
    

    
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js"></script>
<script src="/js/src/post/post.js">></script>

  

  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = 'https://bibichuan.github.io/posts/629155b4.html';
      this.page.identifier = 'posts/629155b4.html';
      this.page.title = 'Linux安装PHP';
      };
    // 加载评论内容
    function loadComments () {
      var d = document, s = d.createElement('script');
      s.src = 'https://https-bibichuan-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);

      // 隐藏相关文章
      s.onload = function () {
        var relatedCommon=$('#comments #disqus_recommendations');
        if(relatedCommon){
          relatedCommon.hide();
        }

      }
    }
    function scrollFunction(){
      // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = $('#comments').offset().top - $(window).height();
          var scrollTop = $(window).scrollTop();

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            $(window).off('scroll',scrollFunction);
            loadComments();
          }
    }
    $(function () {
      if($("#comments").length<=0){
        return;
      }
      var offsetTop = $('#comments').offset().top - $(window).height();
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        loadComments();
      } else {
        $(window).on('scroll', scrollFunction);
      }
    });
  </script>



<script src="/lib/share/iShare.js"></script>
<script type="text/javascript">
var iSharel=(new iShare({container:'.iShare-content',config:{
		title: '这里有精彩的内容，你确定不过来看看吗？链接标题：Linux安装PHP 链接地址:https://bibichuan.github.io/posts/629155b4.html  |(复制此地址在浏览器中打开)——bibichaun出品。',
		description: 'Linux安装PHP',
		url: 'https://bibichuan.github.io/posts/629155b4.html',
		isAbroad: false,
		isTitle: true,
		initialized: true,
		WXoptions:{
			evenType: 'click',
			isTitleVisibility: true,
			title: 'Linux安装PHP',
			isTipVisibility: true,
			tip: 'Linux安装PHP',
			qrcodeW: '120',
			qrcodeH: '120',
			qrcodeFgc: '#4a148c',
      bgcolor: '#2BAD13'
		}
	}}));
</script>


</body>
</html>