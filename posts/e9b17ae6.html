<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>目标检测之LabelStudio</title>
    <!-- 页面描述 -->
<meta name="description" content=""/>
<!-- 页面关键词 -->
<meta name="keywords" content=""/>
<!-- 网页作者 -->
<meta name="author" content="bibichuan, ibibichuan@gmail.com"/>
<!-- 搜索引擎抓取 -->
<meta name="robots" content="index,follow"/>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>

<!--禁止百度转码-->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<!--启用WebApp全屏模式-->
<meta name="apple-mobile-web-app-capable" content="yes" />
<!--禁止数字自动识别为电话号码-->
<meta name="format-detection" content="telephone=no" />
<!--忽略识别邮箱-->
<meta name="format-detection" content="email=no" />
<!--360强制谷歌内核-->
<meta name="renderer" content="webkit"> 

<link rel="icon" href="/images/favicon.ico">

<link rel="stylesheet" href="//at.alicdn.com/t/font_1022896_nclaqhxyt.css">

<link href="/css/main.css" rel="stylesheet" type="text/css" />

<!-- 谷歌广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8382618401389723"></script>


<script type="text/javascript" id="hexo.configurations">
  var BTheme = window.BTheme ||{};
  var CONFIG = {
    root: '/'
  };
</script>

<!--百度统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ee4ff785c4c68fa9a0ea17241e0574ea";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!--谷歌统计-->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G4HPTST8XX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G4HPTST8XX');
</script>

    
    
        
    
        
            
            
            <link href="/lib/layui/css/layui.css" rel="stylesheet" type="text/css" />
        
    

    
        
    

    
        
    


    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" />
<link rel="stylesheet" type="text/css" href="/lib/share/style/css/ishare.css">

<meta name="generator" content="Hexo 5.4.2"></head>
<body class="main">

    <header id="header" class="header layui-fluid">
        <div class="header-inner layui-row"><div class="header-wrap">
    <div class="logo_wrap">
        <a href="/"><img src="/images/logo.png"></a>
    </div>
    <div class='search-warp'>
  <div class="search">
    <input class="search-ipt" placeholder="请输入搜索内容"/>
    <div class="search-btn clear"><i class="iconfont icon-guanbi"></i></div>
    <div class="search-btn find"><i class="iconfont icon-sousuo"></i></div>
  </div>
  <div class="result">
    <ul class="result-content"></ul>
  </div>
</div>
    <div class="icon-menu"><i class="iconfont icon-m_menu"></i></div>
    <nav class="site-nav">
        <ul class="menu layui-nav">
            
            
            <li class="menu-item layui-nav-item">
                <a href="/" rel="section">
                    <i class="iconfont icon-home"></i>首页<i class="iconfont icon-header-mobile icon-right"></i>
                </a>
            </li>
            
            

            
            

            
            
                
                
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E6%9D%82%E6%96%87/">
                                    杂文
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Python/">
                                    Python
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Gis/">
                                    Gis
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/Asp/">
                                    Asp
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                        
                        
                            
                            <li class="menu-item layui-nav-item">
                                <a href="/categories/%E8%BD%AF%E4%BB%B6/">
                                    软件
                                    <i class="iconfont icon-header-mobile icon-right"></i>
                                </a>
                            </li>
                        
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <li class="more menu-item layui-nav-item">
                    
                    <a href="javascript:;" class="menu-more">
                        更多分类
                        <i class="iconfont icon-header-mobile icon-sidemenu"></i>
                    </a>
                    
                    <dl class="layui-nav-child">
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Java/">
                                            Java
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%89%8D%E7%AB%AF/">
                                            前端
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Javascript/">
                                            Javascript
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                            数据库
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
                                            操作系统
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/Nodejs/">
                                            Nodejs
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">
                                            大数据
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1/">
                                            后台服务
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E9%9A%8F%E7%AC%94/">
                                            随笔
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">
                                            机器学习
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                            
                            
                                
                                
                                    
                                    <dd class="nav-child">
                                        <a href="/categories/%E5%85%B6%E4%BB%96/">
                                            其他
                                            <i class="iconfont icon-header-mobile icon-right"></i>
                                        </a>
                                    </dd>
                                
                            
                        
                    </dl>
                </li>
            
        </ul>
    </nav>
</div></div>
    </header>
    
    <main class="main-content layui-fluid" id="main-content">
      <div class="main-inner">
        
  <div class="layui-row layui-col-space15">
    <div class="layui-col-xs12 layui-col-sm10 layui-col-sm-offset1 layui-col-md6 layui-col-md-offset2 layui-col-lg6 layui-col-lg-offset2">
        <div class="container post_wrap">
          <div class="post">
            <div class="article">
              <h1 class="title">目标检测之LabelStudio</h1>
              <div class="author">
                <span class="tag">标签：
                  

                  
                    无
                  
                </span>
                <span class="tag">分类：
                  

                  
                    
                    
                      
                      
                      <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
                    
                  
                </span>
                <span class='tag'>
                  创建时间：2024-10-14 07:38:10
                </span>
                <span class='tag'>
                  更新时间：2025-04-28 14:37:41
                </span>
              </div>
              <div class="content">
                <html><head></head><body><h1 id="1-命令行安装"><a href="#1-命令行安装" class="headerlink" title="1.命令行安装"></a>1.命令行安装</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install label-studio</span><br><span class="line"></span><br><span class="line">label-studio start</span><br></pre></td></tr></tbody></table></figure>

<h1 id="2-docker-安装"><a href="#2-docker-安装" class="headerlink" title="2.docker 安装"></a>2.docker 安装</h1><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Run latest Docker version</span></span><br><span class="line">docker run -itd -p 10003:8080 -v /home/data/label-studio:/label-studio/data heartexlabs/label-studio:latest</span><br></pre></td></tr></tbody></table></figure>

<h1 id="3-使用"><a href="#3-使用" class="headerlink" title="3.使用"></a>3.使用</h1><p>首先需要注册一个账号，注册完成之后，就可以进入创建项目了。</p>
<img src="/images/loadimg.png" data-original="/posts/e9b17ae6/label_1.png" lay-src="/posts/e9b17ae6/label_1.png" class="" title="标注">

<ul>
<li><p>打开部署页面，然后找到，创建项目 -&gt; 导入数据 -&gt; 标签设置，设置完成之后保存，然后进行图片标注。这里选择矩形框的标注，然后可以增加相应的类别。</p>
<img src="/images/loadimg.png" data-original="/posts/e9b17ae6/label_2.png" lay-src="/posts/e9b17ae6/label_2.png" class="" title="标注">
</li>
<li><p>图片标注就是画框，然后选择分类，最后就提交。标注的时候，先选择下面的类别，然后在图上画一个框，修改框的时候，也是选中类别，然后调整框的大小。</p>
</li>
<li><p>保存完成之后，可以导出不同格式的数据。</p>
<img src="/images/loadimg.png" data-original="/posts/e9b17ae6/label_3.png" lay-src="/posts/e9b17ae6/label_3.png" class="" title="标注">

</li>
</ul>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://labelstud.io/guide/quick_start">Quick start</a> 官方安装教程<br>【2】.<a target="_blank" rel="noopener" href="https://labelstud.io/blog/zero-to-one-getting-started-with-label-studio/">Installing Label Studio</a> 这是官方的英文，还提供了docker的数据安装<br>【3】.<a target="_blank" rel="noopener" href="https://richelf.tech/posts/2023-09/0f87cd80-8c23-c2dd-40f3-e1d2df83c2f7.html">使用Label Studio标注YOLOv8数据集</a> 这里进行了标注和数据下载，还有数据集划分。还提供了一个视频文件抽帧的代码。<br>【4】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72915515/article/details/134248502">标注工具——Label Studio安装与简单使用</a></div>
<h1 id="4-自动标注"><a href="#4-自动标注" class="headerlink" title="4.自动标注"></a>4.自动标注</h1><p>label studio还提供了一个集成自动标注的功能，实现该功能需要 label-studio-ml-backend 功能，我主要的修改是通过<a target="_blank" rel="noopener" href="https://github.com/seblful/label-studio-yolov8-backend/blob/main/model.py">代码库</a> 得到的。当然如果你直接使用这个代码仓库，那么可能更加的简单，不需要在修改 Dockerfile,不需要修改 model.py 和_wsgi.py等文件了，只需要把自定义的 best.pt 放到 data/server/models 目录下就行了。</p>
<p>（1）下载源码<br>从github上下载相关的源码，然后。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建虚拟环境</span></span><br><span class="line">conda create --name label-studio python=3.9</span><br><span class="line">conda activate label-studio</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line">conda deactivate label-studio</span><br><span class="line">conda remove --name label-studio --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载源码</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/HumanSignal/label-studio-ml-backend.git</span><br><span class="line"><span class="built_in">cd</span> label-studio-ml-backend/</span><br><span class="line">pip install -e .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置清华源</span></span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple</span><br></pre></td></tr></tbody></table></figure>

<p>（2）创建项目</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">label-studio-ml create ml_backend</span><br></pre></td></tr></tbody></table></figure>

<p>创建一个空的目录结构，其中 model.py 为主要的代码，其中就有 predict 和 fit 方法，通过修改这两个方法，就可以完成模型的预测和训练。<br>my_ml_backend/<br>├── Dockerfile<br>├── .dockerignore<br>├── docker-compose.yml<br>├── model.py<br>├── _wsgi.py<br>├── README.md<br>├── requirements-base.txt<br>├── requirements-test.txt<br>├── requirements.txt<br>└── test_api.py</p>
<p>接下来可以这么做,直接使用 label-studio-ml start 命令启动，或者是使用 docker 命令启动。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">（1）.Try it out by running:</span><br><span class="line">label-studio-ml start ./ml_backend</span><br><span class="line">You should be able to connect to it <span class="keyword">in</span> Label Studio project Settings &gt; Machine Learning &gt; Add Model and provide with the following URL: http://localhost:9090</span><br><span class="line"></span><br><span class="line">（2）.Go to ./ml_backend/model.py and modify it as you wish:</span><br><span class="line">- predict() - define your prediction logic here</span><br><span class="line">- fit() - define your training logic here (optional)</span><br><span class="line"></span><br><span class="line">（3）.Deploy your model with docker:</span><br><span class="line"><span class="built_in">cd</span> ./ml_backend</span><br><span class="line">docker-compose up</span><br></pre></td></tr></tbody></table></figure>

<p>（3）修改 requirements.txt<br>修改 requirements.txt，增加 ultralytics</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ultralytics</span><br></pre></td></tr></tbody></table></figure>

<p>（4）修改 _wsgi.py<br>修改 _wsgi.py 文件，根据参考资料里面的代码，将 _wsgi.py 代码修改了。</p>
<p>（5）将自定义的 best.pt 模型，放到 /usr/local/label-studio/label-studio-ml-backend/ml_backend/data/server/models 目录下。</p>
<p>（6）修改Dockerfile文件,增加了 libgl1，和 libglib2.0-0</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span><br><span class="line">        libgl1 \</span><br><span class="line">        libglib2.0-0 \</span><br></pre></td></tr></tbody></table></figure>

<p>（4）修改 model.py 文件<br>实现预测逻辑，在 model.py 中，通过实现 predict 函数，来自定义自己的预测逻辑。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">self, tasks, context, **kwargs</span>):</span><br><span class="line">    <span class="string">"""Make predictions for the tasks."""</span></span><br><span class="line">    <span class="keyword">return</span> predictions</span><br></pre></td></tr></tbody></table></figure>

<p>实现训练逻辑，在 model.py 中，通过实现 fit 函数，来自定义自己的训练逻辑。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fit</span>(<span class="params">self, event, data, **kwargs</span>):</span><br><span class="line">    <span class="string">"""Train the model on the labeled data."""</span></span><br><span class="line">    old_model = <span class="variable language_">self</span>.get(<span class="string">'old_model'</span>)</span><br><span class="line">    <span class="comment"># write your logic to update the model</span></span><br><span class="line">    <span class="variable language_">self</span>.<span class="built_in">set</span>(<span class="string">'new_model'</span>, new_model)</span><br></pre></td></tr></tbody></table></figure>

<p>修改上面的两个函数，最后形成了model.py文件</p>
<p>（5）启动项目<br>修改了代码之后，可以启动整个项目了。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">docker compose up --build</span><br><span class="line"><span class="comment"># 后台启动并运行所有容器</span></span><br><span class="line">docker compose up -d</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">docker compose down</span><br></pre></td></tr></tbody></table></figure>

<p>（6）label-studio 连接自定义模型<br>找到 项目设置 -&gt; Machine Learning，进行配置。</p>
<p>（7）自动标注<br>选中你要自动标注的图片, 找到任务下拉列表，点击 Retrieve Predictions，预标注这一列会由0 变为 1，检查是否需要手动修改。也可以在项目的设置菜单的 Label 按钮，直接进行标注。</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/jin__9981/article/details/134645589">自动标注好用吗？基于SAM和Label Studio搭建半自动实例分割标注平台</a> 设置label studio使用SAM。同样也是在settings里面，点击Machine Learning，Add Model，填入模型名称，以及SAM 启动的URL，记得要将Use for interactive preannotations打开，最后点击右下角按钮Validate and Save<br>【2】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40260565/article/details/141418885">yolov8 与 label studio实现半自动化标注</a> 实现自己的label studio ml backend,修改了 predict 和 fit 部分的代码，实现了自动标注。<br>【3】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44321572/article/details/134811359">label-studio-ml</a> Label Studio ML后端是一个SDK，可让您包装机器学习代码并将其转换为Web服务器。然后，Web服务器可以连接到Label Studio以自动标记任务并从模型中动态检索预注释。简单来说就是从手动标注数据变成了模型预测，只需要手动微调（模型够精准，预测结果可以拿来直接训练）。<br>【4】.<a target="_blank" rel="noopener" href="https://mmdetection.readthedocs.io/zh-cn/latest/user_guides/label_studio.html">使用 MMDetection 和 Label-Studio 进行半自动化目标检测标注</a><br>【5】.<a target="_blank" rel="noopener" href="https://github.com/seblful/label-studio-yolov8-backend">YOLOv8 ML backend for the Label Studio</a><br>【6】.<a target="_blank" rel="noopener" href="https://openbayes.com/docs/tutorials/use-label-studio-ml-backend-with-uie/">教程：使用 Label Studio 的 machine learning backend 进行辅助标注和训练</a> 简单来讲，my_ml_backend.py 内主要包含一个继承自 LabelStudioMLBase 的类，其内容可以分为以下三个主要部分：1. <strong>init</strong> 方法，包含模型的加载和基本配置的初始化。2.predict 方法，用于为标注数据生成新的预测结果，其关键参数 tasks 就是 label studio 传递的原始数据。3.fit 方法，用于模型的训练，当点击页面上的 Train 按钮时，会调用此方法（具体的位置在下文会提到），其关键参数 annotations 就是 label studio 传递的已经标注了的数据。<br>【7】.<a target="_blank" rel="noopener" href="https://labelstud.io/guide/ml_create.html">Write your own ML backend</a> 这是官方的自定义解释：Use the Label Studio ML backend to integrate Label Studio with machine learning models. The Label Studio ML backend is an SDK that you can use to wrap your machine learning model code and turn it into a web server<br>【8】.<a target="_blank" rel="noopener" href="https://github.com/seblful/label-studio-yolov8-backend/blob/main/model.py">label-studio-yolov8-backend</a> 这里是集成了 yolov8 的模型，我看了 model.py 代码，好像没有什么毛病。<br>【9】.<a target="_blank" rel="noopener" href="https://labelstud.io/tutorials/yolo#YOLO-ML-backend-for-Label-Studio">Your-own-custom-YOLO-models</a> 官方有一个例子，自带了yolo的代码，这里一步步的指导了相关的操作。cd label-studio-ml-backend/examples/yolo,<br>【10】.<a target="_blank" rel="noopener" href="https://github.com/wangduanduan/wangduanduan.github.io/issues/324">docker-compose up 服务如何后台运行</a> </div>
<h1 id="5-导入数据"><a href="#5-导入数据" class="headerlink" title="5.导入数据"></a>5.导入数据</h1><p>如果有从其他软件进行标注过的数据，比如VOC数据，如何导入到 label studio 中呢？或者说直接导入以前已经标注好的数据。</p>
<p>(1) 开启本地文件夹支持<br>增加 LABEL_STUDIO_LOCAL_FILES_SERVING_ENABLED 和 LABEL_STUDIO_LOCAL_FILES_DOCUMENT_ROOT 配置，启用本地文件系统支持</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令行启动</span></span><br><span class="line">LABEL_STUDIO_LOCAL_FILES_SERVING_ENABLED=<span class="literal">true</span> LABEL_STUDIO_LOCAL_FILES_DOCUMENT_ROOT=/data/jinlong/std_data label-studio</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker启动</span></span><br><span class="line">docker run -itd --name=label-studio -p 10003:8080 \</span><br><span class="line">  -v /home/projects/label-studio:/label-studio/data \</span><br><span class="line">  --<span class="built_in">env</span> LABEL_STUDIO_LOCAL_FILES_SERVING_ENABLED=<span class="literal">true</span> \</span><br><span class="line">  --<span class="built_in">env</span> LABEL_STUDIO_LOCAL_FILES_DOCUMENT_ROOT=/label-studio/data \</span><br><span class="line">  heartexlabs/label-studio:latest</span><br></pre></td></tr></tbody></table></figure>

<p>（2）设置项目路径<br>新建项目，设置路径：Settings / Cloud Storage / Add Source Storage ，Storage Type 选择 Local files。右上角 “Absolute local path” 中需要填写绝对路径，而且这个绝对路径需要是 Label Studio 启动时 LABEL_STUDIO_LOCAL_FILES_DOCUMENT_ROOT 中设置的路径的子文件夹。</p>
<p>配置项目目录要填绝对路径（Absolute local path）比如我的：在启动的时候，指定了 /home/data/label-studio 映射到了容器 /label-studio/data 目录，那么我 /home/projects/label-studio/fire 数据存放目录，到label-studio中配置：/label-studio/data/fire/images 目录即可。</p>
<img src="/images/loadimg.png" data-original="/posts/e9b17ae6/label_4.png" lay-src="/posts/e9b17ae6/label_4.png" class="" title="Label Studio">

<p>（3）测试图片访问<br>添加完本地存储之后，查看图片是否可以被访问。比如我的图片目录都是放到 fire/images 目录下，浏览器查看图片是否可以访问。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.1.8:10003/data/local-files/?d=fire/images/your-room1.jpg</span><br></pre></td></tr></tbody></table></figure>

<p>（4）转换voc为yolo<br>一般通过脚本的方式进行，<a target="_blank" rel="noopener" href="https://github.com/DLLXW/objectDetectionDatasets/blob/master/voc_to_yoloV5.py"> objectDetectionDataset</a> 提供了几种转换方法，可以根据需要进行修改之后使用。</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> listdir, getcwd</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join</span><br><span class="line"></span><br><span class="line">classes = [<span class="string">'fire'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">size, box</span>):</span><br><span class="line">    dw = <span class="number">1.</span>/(size[<span class="number">0</span>])</span><br><span class="line">    dh = <span class="number">1.</span>/(size[<span class="number">1</span>])</span><br><span class="line">    x = (box[<span class="number">0</span>] + box[<span class="number">1</span>])/<span class="number">2.0</span> - <span class="number">1</span></span><br><span class="line">    y = (box[<span class="number">2</span>] + box[<span class="number">3</span>])/<span class="number">2.0</span> - <span class="number">1</span></span><br><span class="line">    w = box[<span class="number">1</span>] - box[<span class="number">0</span>]</span><br><span class="line">    h = box[<span class="number">3</span>] - box[<span class="number">2</span>]</span><br><span class="line">    x = x*dw</span><br><span class="line">    w = w*dw</span><br><span class="line">    y = y*dh</span><br><span class="line">    h = h*dh</span><br><span class="line">    <span class="keyword">if</span> w&gt;=<span class="number">1</span>:</span><br><span class="line">        w=<span class="number">0.99</span></span><br><span class="line">    <span class="keyword">if</span> h&gt;=<span class="number">1</span>:</span><br><span class="line">        h=<span class="number">0.99</span></span><br><span class="line">    <span class="keyword">return</span> (x,y,w,h)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_annotation</span>(<span class="params">rootpath,xmlname</span>):</span><br><span class="line">    xmlpath = rootpath + <span class="string">'/Annotations'</span></span><br><span class="line">    xmlfile = os.path.join(xmlpath,xmlname)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(xmlfile, <span class="string">"r"</span>, encoding=<span class="string">'UTF-8'</span>) <span class="keyword">as</span> in_file:</span><br><span class="line">      txtname = xmlname[:-<span class="number">4</span>]+<span class="string">'.txt'</span></span><br><span class="line">      <span class="built_in">print</span>(txtname)</span><br><span class="line">      txtpath = rootpath + <span class="string">'/worktxt'</span><span class="comment">#生成的.txt文件会被保存在worktxt目录下</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(txtpath):</span><br><span class="line">        os.makedirs(txtpath)</span><br><span class="line">      txtfile = os.path.join(txtpath,txtname)</span><br><span class="line">      <span class="keyword">with</span> <span class="built_in">open</span>(txtfile, <span class="string">"w+"</span> ,encoding=<span class="string">'UTF-8'</span>) <span class="keyword">as</span> out_file:</span><br><span class="line">        tree=ET.parse(in_file)</span><br><span class="line">        root = tree.getroot()</span><br><span class="line">        size = root.find(<span class="string">'size'</span>)</span><br><span class="line">        w = <span class="built_in">int</span>(size.find(<span class="string">'width'</span>).text)</span><br><span class="line">        h = <span class="built_in">int</span>(size.find(<span class="string">'height'</span>).text)</span><br><span class="line">        out_file.truncate()</span><br><span class="line">        <span class="keyword">for</span> obj <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">'object'</span>):</span><br><span class="line">            cls = obj.find(<span class="string">'name'</span>).text</span><br><span class="line">            <span class="keyword">if</span> cls <span class="keyword">not</span> <span class="keyword">in</span> classes:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            cls_id = classes.index(cls)</span><br><span class="line">            xmlbox = obj.find(<span class="string">'bndbox'</span>)</span><br><span class="line">            b = (<span class="built_in">float</span>(xmlbox.find(<span class="string">'xmin'</span>).text), <span class="built_in">float</span>(xmlbox.find(<span class="string">'xmax'</span>).text), <span class="built_in">float</span>(xmlbox.find(<span class="string">'ymin'</span>).text), <span class="built_in">float</span>(xmlbox.find(<span class="string">'ymax'</span>).text))</span><br><span class="line">            bb = convert((w,h), b)</span><br><span class="line">            out_file.write(<span class="built_in">str</span>(cls_id) + <span class="string">" "</span> + <span class="string">" "</span>.join([<span class="built_in">str</span>(a) <span class="keyword">for</span> a <span class="keyword">in</span> bb]) + <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    rootpath=<span class="string">r'D:\zlc\gitee\yolov8\data\fire-smoke'</span></span><br><span class="line">    xmlpath=rootpath+<span class="string">'/Annotations'</span></span><br><span class="line">    <span class="built_in">list</span>=os.listdir(xmlpath)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(<span class="built_in">list</span>)) :</span><br><span class="line">        path = os.path.join(xmlpath,<span class="built_in">list</span>[i])</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'.xml'</span> <span class="keyword">in</span> path)<span class="keyword">or</span>(<span class="string">'.XML'</span> <span class="keyword">in</span> path):</span><br><span class="line">            convert_annotation(rootpath,<span class="built_in">list</span>[i])</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'done'</span>, i)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'not xml file'</span>,i)</span><br></pre></td></tr></tbody></table></figure>

<p>（5）创建yolo目录<br>yolo的目录格式如下，其中 classes.txt 中，每行一个类别。通过上面的voc转换为json，然后分开各个路径。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">images</span><br><span class="line">   - 1.jpg</span><br><span class="line">   - 2.jpg</span><br><span class="line">   - ...</span><br><span class="line">labels</span><br><span class="line">  - 1.txt</span><br><span class="line">  - 2.txt</span><br><span class="line">classes.txt</span><br></pre></td></tr></tbody></table></figure>

<p>（6）转换数据格式<br>安装 label-studio-converter，进行数据转换</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">pip install label-studio-converter</span><br><span class="line"><span class="comment"># 转换，这里的 data/fire/images，路径，要在数据目录中，</span></span><br><span class="line">label-studio-converter import yolo -i data/fire-yolo -o output.json --image-root-url <span class="string">"/data/local-files/?d=fire/images"</span></span><br></pre></td></tr></tbody></table></figure>

<p>（7）编辑 label 标签<br>然后在项目设置的 Labeling Interface 中，将上一步生成的 output.label_config.xml 中的内容，也填入进去。</p>
<img src="/images/loadimg.png" data-original="/posts/e9b17ae6/label_5.png" lay-src="/posts/e9b17ae6/label_5.png" class="" title="Label Studio">

<p>（6）导入output.json<br>将生成的 output.json，导入入到项目中</p>
<p>（7）完成<br>这样本地的标注项目就被导入到了 label-studio 中了，开始的时候，我的 output.json 里面没有坐标信息，导致我始终找不到标注在哪里。</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://github.com/HumanSignal/label-studio/issues/513">pre annotation (importing pascal VOC format (xml))</a><br>【2】.<a target="_blank" rel="noopener" href="https://www.breezedeus.com/article/label-studio-20230621">标注工具Label Studio如何导入本地文件和模型预测结果</a> 导入模型预测结果<br>【3】.<a target="_blank" rel="noopener" href="https://study.hycbook.com/article/42221">数据标注工具</a> 将现有标注转为json格式可以用label-studio-converter工具，安装命令为pip install label-studio-converter<br>【4】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/SL1029_/article/details/134190583">label studio导入本地数据集同时邀请他人标注</a> 在启动虚拟环境之前需要先设置环境变量允许访问本地文档,设置数据集路径,设置为数据集的上一个文件夹即可<br>【5】.<a target="_blank" rel="noopener" href="https://community.labelstud.io/t/configuring-local-file-serving-for-label-studio-on-docker-windows/197">Configuring Local File Serving for Label Studio on Docker (Windows)</a> 这里给了解决方案<br>【6】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44321572/article/details/134860555">label-studio — dataset storage</a><br>【7】.<a target="_blank" rel="noopener" href="https://www.dongaigc.com/p/HumanSignal/label-studio-converter">label-studio-converter</a> 这篇文章还详细提供了从yolo导入到label studio的方法，大部分可以参考。Label Studio Converter是一款开源的标注数据转换工具,可将Label Studio的标注结果转换为JSON、CSV、CoNLL 2003、COCO、Pascal VOC XML等多种机器学习格式。此外,它还支持将YOLO格式的预标注数据导入Label Studio。通过命令行和Python API接口,Label Studio Converter简化了数据格式转换流程,有效连接了数据标注和模型训练环节。操作步骤：1.设置环境并运行Label Studio；2.设置本地存储；3.验证图像访问；4.转换YOLO标注；5.导入转换后的标注；6.验证标注；<br>【8】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/Thebest_jack/article/details/125637099">【最全教程】VOC格式转YOLO格式数据</a><br>【9】.<a target="_blank" rel="noopener" href="https://labelstud.io/guide/predictions.html">Import pre-annotated data into Label Studio</a> 这里是官方的说明，但是好像不是很明白。</div>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h2 id="1-PermissionError-Errno-13-Permission-denied-‘-label-studio-data-media’"><a href="#1-PermissionError-Errno-13-Permission-denied-‘-label-studio-data-media’" class="headerlink" title="1.PermissionError: [Errno 13] Permission denied: ‘/label-studio/data/media’"></a>1.PermissionError: [Errno 13] Permission denied: ‘/label-studio/data/media’</h2><p>【解决方案】</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 777 -R label-studio</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://github.com/HumanSignal/label-studio/issues/3766">When trying to run the docker container I get: “PermissionError: [Errno 13] Permission denied: ‘/label-studio/data/media’” </a></div>
<h2 id="2-ModuleNotFoundError-No-module-named-‘ultralytics’"><a href="#2-ModuleNotFoundError-No-module-named-‘ultralytics’" class="headerlink" title="2.ModuleNotFoundError: No module named ‘ultralytics’"></a>2.ModuleNotFoundError: No module named ‘ultralytics’</h2><p>在使用docker启动 ml backend 的时候，总是报错。</p>
<p>【尝试方案】<br>（1）我在 ml_backend 执行了 pip 安装了 ultralytics，无效。</p>
<p>（2）修改了 requirements.txt、requirements-test.txt、requirements-base.txt，增加了 ultralytics。requirements_base.txt and requirements_test.txt are basic dependencies (you don’t need to modify this)</p>
<p>（3）修改了 Dockerfile ，增加了清华源，也是无效。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></tbody></table></figure>

<p>【解决方案】<br>后来的解决方案，我觉得可能是用的 –build 参数。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up --build</span><br></pre></td></tr></tbody></table></figure>


<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="http://www.lxshaw.com/uncategorized/2022/09/09/dockerfile%E6%8D%A2apt%E6%BA%90%E5%92%8Cpip%E6%BA%90/">Dockerfile换apt源和pip源</a><br>【2】.<a target="_blank" rel="noopener" href="https://labelstud.io/tutorials/yolo">YOLO ML backend for Label Studio</a> Step by step guide: Using your own custom YOLOv8 model</div>
<h2 id="3-error-RPC-failed-curl-16-Error-in-the-HTTP2-framing-layer"><a href="#3-error-RPC-failed-curl-16-Error-in-the-HTTP2-framing-layer" class="headerlink" title="3.error: RPC failed; curl 16 Error in the HTTP2 framing layer"></a>3.error: RPC failed; curl 16 Error in the HTTP2 framing layer</h2><p>执行 docker 启动 ml backend之后，出现了：executor failed running [/bin/sh -c pip install -r requirements-base.txt]: exit code: 1。意思就是：Running command git clone –filter=blob:none –quiet <a target="_blank" rel="noopener" href="https://github.com/HumanSignal/label-studio-ml-backend.git">https://github.com/HumanSignal/label-studio-ml-backend.git</a> /tmp/pip-install-y189u4fc/label-studio-ml_6fc0e90d1fec4709a7be0f377235b3cd<br>31.72   error: RPC failed; curl 16 Error in the HTTP2 framing layer</p>
<p>这里其实就是从 label-studio-ml-backend.git 进行安装</p>
<p>【尝试方案】<br>因为label-studio-ml-backend项目就是我从github上下载下来的，于是我就修改了requirements-base.txt,从 https 上下载，改为了直接引用本地仓库，但是没有成功。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># label-studio-ml @ git+https://github.com/HumanSignal/label-studio-ml-backend.git，改为：</span></span><br><span class="line">label-studio-ml @ git+file:///usr/local/label-studio/label-studio-ml-backend</span><br></pre></td></tr></tbody></table></figure>

<p>【解决方案】<br>我也没解决，就是删除了创建的 ml-backend,然后重新安装的。</p>
<p>我感觉特别的奇怪，有时候可以，有时候又不可以,多试几次就可以了。</p>
<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://blog.csdn.net/chwei20002005/article/details/128126582">pip git+install 报错解决</a> 对于已经安装git 的同学，可以 git clone  网络地址,cd 到下载的文件，再 pip setup.py install<br>【2】.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/20101834/pip-install-from-git-repo-branch">pip install from git repo branch</a> pip install -U git+<a target="_blank" rel="noopener" href="https://github.com/danreeves/wagtailgmaps@3.0.0">https://github.com/danreeves/wagtailgmaps@3.0.0</a><br>【3】.<a target="_blank" rel="noopener" href="https://blog.axiaoxin.com/post/python-requirements-file/">https://blog.axiaoxin.com/post/python-requirements-file/</a> requirements.txt 文件格式详细说明<br>【4】.<a target="_blank" rel="noopener" href="https://learnku.com/articles/31029">requirements.txt 文件声明依赖 </a> 除了 git 协议，pip 还支持以下传输协议:git git+http git+https git+ssh git+git git+file<br>【5】.<a target="_blank" rel="noopener" href="https://github.com/pypa/pip/issues/12124">The git+file requirement format doesn’t seem to work the way documentation says it does </a></div>
<h2 id="4-libGL-so-1-cannot-open-shared-object-file-No-such-file-or-directory"><a href="#4-libGL-so-1-cannot-open-shared-object-file-No-such-file-or-directory" class="headerlink" title="4.libGL.so.1: cannot open shared object file: No such file or directory"></a>4.libGL.so.1: cannot open shared object file: No such file or directory</h2><p>这个问题其实是我注释了上面的requirements-base.txt, 然后执行导致的。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">label-studio-ml @ git+file:///usr/local/label-studio/label-studio-ml-backend，</span><br></pre></td></tr></tbody></table></figure>

<p>【尝试方案】<br>（1）我也没解决，就是删除了创建的 ml-backend,然后重新安装的。<br>（2）我也尝试了修改了 requirements.txt，增加了 opencv-python-headless，结果无效<br>（3）修改了 Dockerfile 文件，增加了如下的代码，结果 Unable to locate package libgl1-mesa-glx</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN apt install -y libgl1-mesa-glx</span><br></pre></td></tr></tbody></table></figure>
<p>（4）修改 Dockerfile 文件，增加了 下面的代码</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update &amp;&amp; apt-get install -y python3-opencv</span><br><span class="line">RUN pip install opencv-python</span><br></pre></td></tr></tbody></table></figure>

<p>【解决方案】</p>
<p>修改了 Dockerfile 文件,增加了 libgl1，libglib2.0-0。</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span><br><span class="line">        libgl1 \</span><br><span class="line">        libglib2.0-0 \</span><br></pre></td></tr></tbody></table></figure>

<div class="reference">参考文章:<br>【1】.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/mrneojeep/p/16252044.html">【解决方法】libGL.so.1: cannot open shared object file: No such file or directory</a><br>【2】.<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55313610/importerror-libgl-so-1-cannot-open-shared-object-file-no-such-file-or-directo">ImportError: libGL.so.1: cannot open shared object file: No such file or directory</a></div></body></html>
              </div>
            </div>
          </div>
          <div class='post-footer'>
            <div>**本文已结束，感谢您的观看**</div>
            <div class="btn btn-pay">鼓励一下</div>
          </div>
          
            <div class="page">
              
              <section class="past-wrap">
                <section class="past">
                <p>往期推荐</p>
                </section>
              </section>
              <div class="post-nav">
                <div class="post-nav-next post-nav-item">
                  
                    <a href="/posts/e48859f1.html" rel="next" title="目标检测之Tensorflow图像检测">
                      <i class="iconfont icon-prev"></i> 目标检测之Tensorflow图像检测
                    </a>
                  
                </div>

                <span class="post-nav-divider"></span>

                <div class="post-nav-prev post-nav-item">
                  
                    <a href="/posts/ac52ef6c.html" rel="prev" title="火影剧情回顾（值得看的主线剧级）">
                      火影剧情回顾（值得看的主线剧级） <i class="iconfont icon-next"></i>
                    </a>
                  
                </div>
              </div>
            </div>
          
          
 <div class="comments" id="comments">
    <div id="disqus_thread">
        <noscript>
            不支持Javascript,那你还上啥网啊。
            <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript"></a>
        </noscript>
    </div>
</div>

      </div>
    </div>


    <div class="layui-col-md2 layui-col-lg2 layui-col-sm10 layui-col-xs12 catalogue-wrap">
        

<div class="catalogue-content">
    <div class="title">文章目录</div>
    <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">1.命令行安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-docker-%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">2.docker 安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">3.使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%87%AA%E5%8A%A8%E6%A0%87%E6%B3%A8"><span class="toc-number">4.</span> <span class="toc-text">4.自动标注</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">5.</span> <span class="toc-text">5.导入数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-PermissionError-Errno-13-Permission-denied-%E2%80%98-label-studio-data-media%E2%80%99"><span class="toc-number">6.1.</span> <span class="toc-text">1.PermissionError: [Errno 13] Permission denied: ‘&#x2F;label-studio&#x2F;data&#x2F;media’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ModuleNotFoundError-No-module-named-%E2%80%98ultralytics%E2%80%99"><span class="toc-number">6.2.</span> <span class="toc-text">2.ModuleNotFoundError: No module named ‘ultralytics’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-error-RPC-failed-curl-16-Error-in-the-HTTP2-framing-layer"><span class="toc-number">6.3.</span> <span class="toc-text">3.error: RPC failed; curl 16 Error in the HTTP2 framing layer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-libGL-so-1-cannot-open-shared-object-file-No-such-file-or-directory"><span class="toc-number">6.4.</span> <span class="toc-text">4.libGL.so.1: cannot open shared object file: No such file or directory</span></a></li></ol></li></ol>
    </div>
</div>


        <div class="sidecontent">

    

    <div class="side-panel side-sponsor">
        <div class="side-title one">小额赞助</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">本人提供免费与付费咨询服务，感谢您的支持！赞助请发邮件通知，方便公布您的善意！</div>
                <div class="content">
                    <img src="/images/pay.png" title="小额赞助"/>
                </div>
                
                
                <div class="donor_content">
                    
                        
                        <div class="donor-item">
                            <span class="name">**光</span>
                            <span class="money">3.01 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">Sun</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                        
                        <div class="donor-item">
                            <span class="name">bibichuan</span>
                            <span class="money">3.00 元</span>
                        </div>
                    
                    <div class="donor_footer">
                        <span>捐赠者名单</span>
                        <span class="total">合计：9.01 元</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title two">微信公众号</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <img src="/images/wechat.png" title="公众号"/>
            </div>
        </div>
    </div>

    <div class="side-ad side-panel">
        <div class="side-title one">广告位</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">诚心邀请广大金主爸爸洽谈合作</div>
                <div class="detail">
                </div>
            </div>
        </div>
    </div>

    <div class="side-ask side-panel">
        
        <div class="side-title two">每日一省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">isNaN 和 Number.isNaN 函数的区别？</div>
                <div class="detail">
                    
                        <p>1.函数 isNaN 接收参数后，会尝试将这个参数转换为数值，任何不能被转换为数值的的值都会返回 true，因此非数字值传入也会返回 true ，会影响 NaN 的判断。</p>
                    
                        <p>2.函数 Number.isNaN 会首先判断传入参数是否为数字，如果是数字再继续判断是否为 NaN ，不会进行数据类型的转换，这种方法对于 NaN 的判断更为准确。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日二省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">为什么0.1+0.2 ! == 0.3，如何让其相等?</div>
                <div class="detail">
                     
                        <p>一个直接的解决方法就是设置一个误差范围，通常称为“机器精度”。对JavaScript来说，这个值通常为2-52，在ES6中，提供了Number.EPSILON属性，而它的值就是2-52，只要判断0.1+0.2-0.3是否小于Number.EPSILON，如果小于，就可以判断为0.1+0.2 ===0.3。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-8"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title three">每日三省</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">== 操作符的强制类型转换规则？</div>
                <div class="detail">
                     
                        <p>1.首先会判断两者类型是否**相同，**相同的话就比较两者的大小。</p>
                    
                        <p>2.类型不相同的话，就会进行类型转换。</p>
                    
                        <p>3.会先判断是否在对比 null 和 undefined，是的话就会返回 true。</p>
                    
                        <p>4.判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number。</p>
                    
                        <p>5.判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断。</p>
                    
                        <p>6.判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断。</p>
                    
                </div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2021-04-07</span>
                
                    <span class="side-footer-item side-button down" title="查看答案">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                
                    <a class="side-footer-item side-button answer-url" href="https://juejin.cn/post/6940945178899251230#heading-12"
                    target="_blank">链接地址</a>
                
            </div>
        </div>
    </div>
    <div class="side-ask side-panel">
        
        <div class="side-title two">每日英语</div>
        <div class="side-content-wrap">
            <div class="side-content">
                <div class="heading">Happiness is time precipitation, smile is the lonely sad.</div>
                <div class="detail">幸福是年华的沉淀，微笑是寂寞的悲伤。</div>
            </div>
            <div class="side-footer">
                <span class="side-footer-item time">2016</span>
                
                    <span class="side-footer-item side-button down" title="查看翻译">
                        <i class="iconfont icon-expansion"></i>
                    </span>
                
                <span class="side-footer-item author">——— 美文</span>
            </div>
        </div>
    </div>

</div>
    </div>

  </div>
  <div class="side-tool">
    <div class="side-icon-wrap">
        <i class="iconfont icon-sidemenu"></i>
    </div>
    <ul class="side-tool-content">
        <li title="回到顶部" class="back-to-top side-tool-item">
            <a class="function-button"><i class="iconfont icon-backtop"></i></a>
        </li> 
        <li title="分享文章" class="side-share side-tool-item">
            <a class="function-button"><i class="iconfont icon-share"></i></a>
            <div class="iShare iShare-content"></div>
        </li>
        <li title="喜欢文章" class="side-like side-tool-item">
            <a class="function-button"><i class="iconfont icon-like"></i></a>
        </li>
         <li class="side-close" title="关闭侧边栏">
            <a class="function-button"><i class="iconfont icon-close"></i></a>
        </li>
    </ul>
</div>

      </div>
    </main>   
    
    <footer id="footer" class="footer layui-fluid">
      <div class="layui-row">
        <div class="container footer-inner">
          <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="footer-col">
  <div>温馨提示</div>
  <div><a href="/about" target="_self">关于作者</a></div>
  <div><a href="/archives">博客归档</a></div>
  <div>
    <span id="busuanzi_container_site_uv">
      访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
  </div>
</div>
<div class="footer-col">
  <div>友情链接</div>
  
  
  
  
    
        <div><a href="https://malagis.com" target="_blank">麻辣GIS</a></div>
    
  
    
        <div><a href="https://www.giserdqy.com" target="_blank">GIS开发者</a></div>
    
  
    
        <div><a href="https://earth.nullschool.net/zh-cn/" target="_blank">earth.nullschool</a></div>
    
  
    
        <div><a href="https://www.gisclouder.com/" target="_blank">码上GIS实现的热力图</a></div>
    
  
    
        <div><a href="http://www.cnblogs.com/naaoveGIS/" target="_blank">李晓辉的博客园</a></div>
    
  
    
        
          <div><a href="/links">更多</a></div>
          
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
  <div class="chain-msg">**注意：以上网站都没给钱**</div>
</div>
<div class="footer-col">
  <div>精彩推荐</div>
  
    <div><a href="/study">励志</a></div>
  
    <div><a href="/anime">动漫</a></div>
  
    <div><a href="/movie">电影</a></div>
  
    <div><a href="/tv">电视</a></div>
  
    <div><a href="/book">书籍</a></div>
  
</div>
<div class="footer-col">
  <div>开源项目</div>
  
    <div><a href="/"></a></div>
  
</div>
          
        </div>
      </div>
    </footer>

    


<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>

    
        
            
            
            <script type="text/javascript" src="/lib/layui/layui.js"></script>
        
    
        
    

    
        
            
            
                
            
            <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
        
    

    
        
            
            
            <script type="text/javascript" src="/lib/jquery.actual.min.js"></script>
        
    


    


  <script type="text/javascript" src="/js/src/utils.js?v="></script>



    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
<script type="text/javascript">
  var client = algoliasearch('DM9LMZOGZE', '1c2739694b8acb4c4edab8ccb098d166');
  var index = client.initIndex('bibichuan');
  $(document).ready(function(){
    var $search=$(".header-wrap");
    var $searchbtn= $search.find(".find");
    var $ipt=$search.find(".search-ipt");
    var $resultClear=$search.find(".clear");
    var $result=$search.find(".result");
    // 加入layui
    layui.use('layer', function(){
      var layer = layui.layer;
      // 搜索按钮点击
      $searchbtn.on("click",function(){
        var text=$ipt.val();
        var $this=$(this);
        var $resultContent=$result.find(".result-content");
        if(text){
          var loadDialog=layer.load();
          if(!$this.hasClass("disabled")){
            $this.addClass("disabled");
            index.search(text, (err, { hits } = {}) => {
              layer.close(loadDialog); 

              $this.removeClass("disabled");
              var resultHtml="";
              // 命中
              if(hits.length>0){
                var count=hits.length;
                for(var i=0;i<count;i++){
                  var h=hits[i];
                  //根据返回值中_highlightResult来判断显示的内容。
                  var content=h.contentStripTruncate;
                  var _highlight=h._highlightResult;

                  var resultC="";
                  var hitType=""; // 命中的类型
                  //标题命中
                  if(_highlight.title&&!resultC){  
                    if(_highlight.title.matchLevel&&_highlight.title.matchLevel!='none'){
                      resultC=_highlight.title.value;
                      hitType="title";
                    }
                  }
                  //分类命中
                  if(_highlight.categories&&!resultC){ 
                    var arr=_highlight.categories;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="categories";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="categories";
                      }
                    }
                  }

                  //标签命中
                  if(_highlight.tags&&!resultC){ 
                    var arr=_highlight.tags;
                    if(arr instanceof Array){
                      var countTemp=arr.length;
                      for(var j=0;j<countTemp;j++){
                        var temp=arr[j];
                        if(temp.matchLevel&&temp.matchLevel!='none'){
                          resultC=temp.value;
                          hitType="tags";
                        }
                      }
                    }else{
                      if(arr.matchLevel&&arr.matchLevel!='none'){
                        resultC=arr.value;
                        hitType="tags";
                      }
                    }
                  }

                  // 内容命中
                  if(!resultC){ 
                    resultC=_highlight.contentStripTruncate.value;
                    hitType="contentStripTruncate";
                  }

                  //如果内容过长，则截断
                  if(resultC.length>50){
                    var index=resultC.indexOf('<em>');
                    var blockIndex=10;
                    if(index>=blockIndex){
                      index=index-blockIndex;
                    }else{
                      index=0;
                    }
                    resultC="..."+resultC.substring(index,index+20+blockIndex)+"...";
                  }
                  switch(hitType){
                    case "title":
                      resultC="标题："+resultC;
                      break;
                    case "categories":
                      resultC="分类："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "tags":
                      resultC="标签："+resultC;
                      resultC+=" ("+h.contentStripTruncate.substring(0,40)+"...)";
                      break;
                    case "contentStripTruncate":
                      resultC="内容："+resultC;
                      break;
                  }

                  resultHtml+='<li class="result-item" title="'+content+'"><a href="'+h.permalink+'">'+resultC+'</a></li>';
                }
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }else{
                var resultHtml='<li class="result-item" title="未找到相关内容"><a>未找到相关内容</a></li>';
                $(resultHtml).appendTo($resultContent.empty());
                $result.show();
                $resultClear.show();
              }
            });
          }
        }else{
          layer.msg("请输入搜索内容");
        }
      });
      // 删除输入内容
      $resultClear.on("click",function(){
        $result.hide();
        $resultClear.hide();
        //清空输入内容
        $ipt.val("");
      });
      // 监听确定事件
      $ipt.keydown(function(e){
        if(e.keyCode==13){
          $searchbtn.click();
        }
      });
    });              
  
  });
</script>
    

    
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js"></script>
<script src="/js/src/post/post.js">></script>

  

  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = 'https://bibichuan.github.io/posts/e9b17ae6.html';
      this.page.identifier = 'posts/e9b17ae6.html';
      this.page.title = '目标检测之LabelStudio';
      };
    // 加载评论内容
    function loadComments () {
      var d = document, s = d.createElement('script');
      s.src = 'https://https-bibichuan-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);

      // 隐藏相关文章
      s.onload = function () {
        var relatedCommon=$('#comments #disqus_recommendations');
        if(relatedCommon){
          relatedCommon.hide();
        }

      }
    }
    function scrollFunction(){
      // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = $('#comments').offset().top - $(window).height();
          var scrollTop = $(window).scrollTop();

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            $(window).off('scroll',scrollFunction);
            loadComments();
          }
    }
    $(function () {
      if($("#comments").length<=0){
        return;
      }
      var offsetTop = $('#comments').offset().top - $(window).height();
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        loadComments();
      } else {
        $(window).on('scroll', scrollFunction);
      }
    });
  </script>



<script src="/lib/share/iShare.js"></script>
<script type="text/javascript">
var iSharel=(new iShare({container:'.iShare-content',config:{
		title: '这里有精彩的内容，你确定不过来看看吗？链接标题：目标检测之LabelStudio 链接地址:https://bibichuan.github.io/posts/e9b17ae6.html  |(复制此地址在浏览器中打开)——bibichaun出品。',
		description: '目标检测之LabelStudio',
		url: 'https://bibichuan.github.io/posts/e9b17ae6.html',
		isAbroad: false,
		isTitle: true,
		initialized: true,
		WXoptions:{
			evenType: 'click',
			isTitleVisibility: true,
			title: '目标检测之LabelStudio',
			isTipVisibility: true,
			tip: '目标检测之LabelStudio',
			qrcodeW: '120',
			qrcodeH: '120',
			qrcodeFgc: '#4a148c',
      bgcolor: '#2BAD13'
		}
	}}));
</script>


</body>
</html>